[TOC]

# 1. 网络层功能概述

	主要任务是把`分组`从源端传到目的端，为分组交换网上的不同主机提供提供通信服务。网络层传输单位是`数据报`。

> `功能一`：路由选择与分组转发【最佳路径】
>  
> ![1620032016813.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674022455020-b5395d28-edb5-444a-a610-ca43df4dea59.png#averageHue=%23f7f7f7&clientId=u9a4e94c4-4e3a-4&from=drop&id=u6188835f&originHeight=334&originWidth=991&originalType=binary&ratio=1&rotation=0&showTitle=false&size=117207&status=done&style=none&taskId=u14d4fb1c-f04e-4152-bf74-d39ab12c4ed&title=)
>  
> `功能二`：异构网络互连【依靠`路由器`把 wifi、4G、校园网等网络互连，构成更大的网络】
>  
> ![1620032046620.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674022479004-e86223cd-ff4a-4884-877a-7f28d8936495.png#averageHue=%23cbd9e6&clientId=u9a4e94c4-4e3a-4&from=drop&id=u73724461&originHeight=448&originWidth=1018&originalType=binary&ratio=1&rotation=0&showTitle=false&size=170850&status=done&style=none&taskId=uaa3d6aed-417b-4b1c-877e-5c9691d6f1f&title=)
>  
> `功能三`：拥塞控制
>  
> ![1620032162532.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674022499302-8d19cbee-6066-4226-86bf-795128269d56.png#averageHue=%23f3f3f3&clientId=u9a4e94c4-4e3a-4&from=drop&id=uc5a7e8b2&originHeight=228&originWidth=1236&originalType=binary&ratio=1&rotation=0&showTitle=false&size=154554&status=done&style=none&taskId=u8cbf5bdc-ae64-48ac-add0-5947798f7df&title=)


# 2. 数据交换方式

## 2.1 进行数据交换的原因

![1620032447017.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674022536185-19c5d1c6-b81d-450b-b45d-912afc791c2c.png#averageHue=%23efede8&clientId=u9a4e94c4-4e3a-4&from=drop&id=u130b3145&originHeight=622&originWidth=1599&originalType=binary&ratio=1&rotation=0&showTitle=false&size=346219&status=done&style=none&taskId=ufd333c43-8a6d-4765-8924-d7b19665015&title=)

> 图一：实现主机间通信，需要大量通信链路
>  
> 图二：所需通信链路减少了，但是无法支撑远距离通信以及大量主机接入的通信
>  
> 图三：能很好的解决上述问题


## 2.2 电路交换

![1620032800640.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674022555266-9613483b-8574-4cd1-b3a5-e3d7f03c5821.png#averageHue=%23f1eadf&clientId=u9a4e94c4-4e3a-4&from=drop&id=u1f5fb78f&originHeight=762&originWidth=1564&originalType=binary&ratio=1&rotation=0&showTitle=false&size=588014&status=done&style=none&taskId=u80f0b4f5-26de-4459-ad41-9a30e55197b&title=)

## 2.3 报文交换

![1620032967638.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674022578773-13f995a6-6add-4dec-a17d-95d92d744f0c.png#averageHue=%23f4f3f3&clientId=u9a4e94c4-4e3a-4&from=drop&id=ue9463684&originHeight=644&originWidth=1432&originalType=binary&ratio=1&rotation=0&showTitle=false&size=374910&status=done&style=none&taskId=ub27eb7c2-640a-4759-a4b2-a58ceb5b904&title=)

## 2.4 分组交换

### 2.4.1 介绍

`分组`：把大的数据块(`报文`)分割成许多小的数据块

![1620033191510.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674022616807-ec0e0b06-1cf8-49ec-a53c-c2ffd369ac22.png#averageHue=%23f4f3f3&clientId=u9a4e94c4-4e3a-4&from=drop&id=u082ab2b2&originHeight=635&originWidth=1516&originalType=binary&ratio=1&rotation=0&showTitle=false&size=383784&status=done&style=none&taskId=uf03548ed-c527-4618-8436-6aba1099e31&title=)

### 2.4.1 数据报方式&虚电路方式

![1620033932759.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674022645664-0db058fe-49bb-4d13-9c5c-a64dc62ebbf5.png#averageHue=%23e3e2e2&clientId=u9a4e94c4-4e3a-4&from=drop&id=ua2270e64&originHeight=226&originWidth=1509&originalType=binary&ratio=1&rotation=0&showTitle=false&size=242395&status=done&style=none&taskId=u18eab08f-e8cb-4fa7-9f24-413f07c0174&title=)

#### 2.4.1.1 数据报介绍【因特网在使用】

![1620039524617.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674022673833-eb4d1224-e382-41a7-96dd-8462f6172ab9.png#averageHue=%23f3f0ea&clientId=u9a4e94c4-4e3a-4&from=drop&id=ufa4aabcf&originHeight=741&originWidth=1504&originalType=binary&ratio=1&rotation=0&showTitle=false&size=428825&status=done&style=none&taskId=uda476d9b-19ea-43a3-8e20-2e78db45a36&title=)

#### 2.4.1.2 虚电路介绍

![1620039774165.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674022689388-a36dd3e4-ce43-4bf1-add4-fa09573eb77c.png#averageHue=%23f1eadf&clientId=u9a4e94c4-4e3a-4&from=drop&id=uab4e42a0&originHeight=726&originWidth=1540&originalType=binary&ratio=1&rotation=0&showTitle=false&size=668343&status=done&style=none&taskId=uae32dbb1-37ae-48de-9c1e-e45d51fe9d3&title=)

#### 2.4.1.3 数据报 & 虚电路

![1620039822963.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674022702641-f0de45a1-74a1-4eb0-a947-8307f257f525.png#averageHue=%23e4e4e4&clientId=u9a4e94c4-4e3a-4&from=drop&id=ua95b2f55&originHeight=573&originWidth=1467&originalType=binary&ratio=1&rotation=0&showTitle=false&size=318507&status=done&style=none&taskId=u82bad2ae-aa84-4750-b077-49e84391959&title=)

### 2.4.2 几种传输单元对比

![1620039321385.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674022713811-d84fa81a-d810-4249-9758-64c9e9d2117c.png#averageHue=%23e7e4e4&clientId=u9a4e94c4-4e3a-4&from=drop&id=u49a1b636&originHeight=337&originWidth=1460&originalType=binary&ratio=1&rotation=0&showTitle=false&size=188076&status=done&style=none&taskId=u9fc767bb-1451-49ab-ae35-37c61ec2252&title=)

## 2.5 报文交换 & 分组交换

![1620033502647.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674022838645-a0dcc018-8bda-4e95-913e-c05d0556dd61.png#averageHue=%23f2f0ef&clientId=u9a4e94c4-4e3a-4&from=drop&id=u4ed19463&originHeight=797&originWidth=1659&originalType=binary&ratio=1&rotation=0&showTitle=false&size=699633&status=done&style=none&taskId=uc4e76a27-0074-4fed-9a51-15640d05a9a&title=)

## 2.6 小结

![1620033627957.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674022858023-abd82e85-72ad-4561-9e99-d538fe2293bf.png#averageHue=%23efefef&clientId=u9a4e94c4-4e3a-4&from=drop&id=ue63966b7&originHeight=664&originWidth=1616&originalType=binary&ratio=1&rotation=0&showTitle=false&size=453528&status=done&style=none&taskId=u201614c4-42d0-482f-876f-f819e6f90ea&title=)

# 3. IP数据报

## 3.1 TCP/IP协议栈构造

![1620040158374.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674022898200-46ec09e6-8f61-4d37-aa3d-9c30f1e7c5c7.png#averageHue=%23a46729&clientId=u9a4e94c4-4e3a-4&from=drop&id=u7e433211&originHeight=581&originWidth=1431&originalType=binary&ratio=1&rotation=0&showTitle=false&size=119653&status=done&style=none&taskId=u884931f2-d587-460e-b987-2f2241cdaa8&title=)

## 3.2 IP数据报格式

![1620040260602.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674022912678-2d29c6fd-37d2-4cdf-962d-69b3b42654ba.png#averageHue=%23f2f0ed&clientId=u9a4e94c4-4e3a-4&from=drop&id=u01d5cc9d&originHeight=380&originWidth=1468&originalType=binary&ratio=1&rotation=0&showTitle=false&size=120536&status=done&style=none&taskId=u04ef19f4-527f-468b-8822-7f89de0a19f&title=)

![1620040544306.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674022922924-00e174cb-c651-4d0e-8806-795b8f2f46fd.png#averageHue=%23e6c8af&clientId=u9a4e94c4-4e3a-4&from=drop&id=u6290cd24&originHeight=761&originWidth=1647&originalType=binary&ratio=1&rotation=0&showTitle=false&size=473387&status=done&style=none&taskId=u703f71a3-f268-4700-a13c-9001a1ca499&title=)

> 协议字段：TCP ==> 6  UDP ==> 17


## 3.3 IP数据报分片

### 3.3.1 最大传输单元MTU

![1620040804722.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674022939456-dcaccd5c-9731-4745-b2fd-2d0a4adc2529.png#averageHue=%23a9a75c&clientId=u9a4e94c4-4e3a-4&from=drop&id=ua72699c0&originHeight=566&originWidth=1564&originalType=binary&ratio=1&rotation=0&showTitle=false&size=267772&status=done&style=none&taskId=u86d4fe70-c3ce-4c57-9122-1eaf28fa3ee&title=)

### 3.3.2 分片所涉及的首部字段

![1620041115317.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674022957650-b828ee74-050c-490f-a178-16959ded699e.png#averageHue=%23d29d7b&clientId=u9a4e94c4-4e3a-4&from=drop&id=ue290d6c7&originHeight=746&originWidth=1644&originalType=binary&ratio=1&rotation=0&showTitle=false&size=477841&status=done&style=none&taskId=uad55af51-4f21-49de-8bf5-5e5b77383f2&title=)

`**【例题】**`

![1620041294392.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023019569-759001c4-07a4-4417-8375-efc4d37b807b.png#averageHue=%23d7d3cf&clientId=u9a4e94c4-4e3a-4&from=drop&id=uc1c8b049&originHeight=761&originWidth=1656&originalType=binary&ratio=1&rotation=0&showTitle=false&size=456001&status=done&style=none&taskId=u3688879e-83e6-4722-8829-68872aff550&title=)

### 3.3.3 部分字段单位

`一种八片首饰`【总长度单位是1Byte、片偏移单位是8Byte、首部长度单位是4Byte】

![1620041410636.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023041733-5ca9cb53-5623-4fba-b64a-69a9687f2d7b.png#averageHue=%23dac46d&clientId=u9a4e94c4-4e3a-4&from=drop&id=u67272f92&originHeight=713&originWidth=1559&originalType=binary&ratio=1&rotation=0&showTitle=false&size=377426&status=done&style=none&taskId=ueaca2226-1647-436b-a5c1-3f1db4a32d0&title=)

# 4. IPv4地址

## 4.1 IP编址历史

- 分类的IP地址
- 子网的划分
- 构成超网【无分类编址方法】

## 4.2 分类的IP地址

### 4.2.1 IP地址介绍

![1620041933771.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023056263-9920adb4-43f0-4c95-8c2e-59797efb2cc6.png#averageHue=%23f2f2f2&clientId=u9a4e94c4-4e3a-4&from=drop&id=u419a5235&originHeight=323&originWidth=1489&originalType=binary&ratio=1&rotation=0&showTitle=false&size=169030&status=done&style=none&taskId=u49ad6966-210a-4c21-bee9-cabda667fd5&title=)

### 4.2.2 互联网中的IP地址

![1620042146733.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023073872-6e2cc82f-f1be-4b4e-b81c-9862afad5c25.png#averageHue=%23f2e6de&clientId=u9a4e94c4-4e3a-4&from=drop&id=u1230a009&originHeight=736&originWidth=1603&originalType=binary&ratio=1&rotation=0&showTitle=false&size=510269&status=done&style=none&taskId=u10c01c35-0af9-4fd4-a1ec-ba516906800&title=)

### 4.2.3 分类方法

![1620042237647.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023084285-e851a86c-37ce-4ae0-94e1-75243d4c7aec.png#averageHue=%23ecebeb&clientId=u9a4e94c4-4e3a-4&from=drop&id=u71b3f352&originHeight=592&originWidth=1652&originalType=binary&ratio=1&rotation=0&showTitle=false&size=170185&status=done&style=none&taskId=u75dc06ea-9c59-43f7-8ba8-c47a3ff781b&title=)

### 4.2.4 特殊的IP地址

![1620042415669.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023093468-d789c26e-e7fa-4e31-be58-a8487ac0ebe9.png#averageHue=%23c2d3e6&clientId=u9a4e94c4-4e3a-4&from=drop&id=u10d9c1e8&originHeight=739&originWidth=1548&originalType=binary&ratio=1&rotation=0&showTitle=false&size=439792&status=done&style=none&taskId=ue4af5121-1991-4674-ba69-226d59b6f98&title=)

### 4.2.5 私有IP地址

`路由器对目的地址是私有IP地址的数据报一律不进行转发`

![1620042557072.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023111493-69dddc5c-438f-4285-b21e-eba9f0d0100e.png#averageHue=%23dadada&clientId=u9a4e94c4-4e3a-4&from=drop&id=ufcc121f4&originHeight=440&originWidth=1446&originalType=binary&ratio=1&rotation=0&showTitle=false&size=112676&status=done&style=none&taskId=u4e0e1ea6-ac49-4557-a3dd-db55ad45922&title=)

### 4.2.6 各类IP地址可指派数

![1620042731303.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023130297-3b5117d9-0a63-4e84-805f-4c348c88dd0c.png#averageHue=%23eae9e9&clientId=u9a4e94c4-4e3a-4&from=drop&id=u80325075&originHeight=707&originWidth=1605&originalType=binary&ratio=1&rotation=0&showTitle=false&size=304789&status=done&style=none&taskId=u2ba5a793-e510-4e2c-b720-702dc209fe4&title=)

## 4.3 网络地址转换【NAT】

![1620043202996.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023148054-f335a812-2504-4080-83ec-497a30faf2c8.png#averageHue=%23eae4de&clientId=u9a4e94c4-4e3a-4&from=drop&id=u60906f23&originHeight=745&originWidth=1595&originalType=binary&ratio=1&rotation=0&showTitle=false&size=614672&status=done&style=none&taskId=ub4f65b31-47f3-4432-9354-3508cd48a9a&title=)

## 4.4 子网划分与子网掩码

### 4.4.1 分类IP地址的缺点

![1620043390540.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023167305-038f72d8-666e-4288-b42b-5c961ad00af9.png#averageHue=%23ecebeb&clientId=u9a4e94c4-4e3a-4&from=drop&id=u5fb86145&originHeight=467&originWidth=1602&originalType=binary&ratio=1&rotation=0&showTitle=false&size=213043&status=done&style=none&taskId=u68a879ff-0561-4d63-9a5e-8c21876976b&title=)

### 4.4.2 划分方法

![1620043485220.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023185490-c83aa244-4021-4eb2-88b4-44071f9c9f73.png#averageHue=%23f1ece6&clientId=u9a4e94c4-4e3a-4&from=drop&id=ue5c57d28&originHeight=531&originWidth=1493&originalType=binary&ratio=1&rotation=0&showTitle=false&size=192832&status=done&style=none&taskId=u49dd4c28-391b-4dc6-9121-b7ba8d524af&title=)

### 4.4.3 子网划分例子

![1620045479394.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023208280-a66ac017-4365-4cc7-bf3e-79af7b82967a.png#averageHue=%23f0f2f1&clientId=u9a4e94c4-4e3a-4&from=drop&id=ua00a9cbb&originHeight=730&originWidth=1570&originalType=binary&ratio=1&rotation=0&showTitle=false&size=450743&status=done&style=none&taskId=u10beea40-770b-47ef-836b-1b86a0fe32a&title=)

### 4.4.4 子网掩码

![1620045533257.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023222113-9cc525a1-1490-431f-a42a-76daa2b9a9fe.png#averageHue=%23ebd9c3&clientId=u9a4e94c4-4e3a-4&from=drop&id=u80a82b98&originHeight=666&originWidth=1449&originalType=binary&ratio=1&rotation=0&showTitle=false&size=295794&status=done&style=none&taskId=u16cd498e-b17b-4953-8014-92356338f31&title=)

【例题】

![1620045567890.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023234833-0d1d6fb1-2744-4428-9582-83cec79a31b6.png#averageHue=%23eceae9&clientId=u9a4e94c4-4e3a-4&from=drop&id=udd07eb32&originHeight=729&originWidth=1617&originalType=binary&ratio=1&rotation=0&showTitle=false&size=433386&status=done&style=none&taskId=uf8192276-57d1-49fb-91a9-698acf8b55e&title=)

### 4.4.5 使用子网时分组的转发

![1620045624579.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023247751-2a0e9143-e3e2-42fa-83c1-0e2586847ace.png#averageHue=%23f5f7f6&clientId=u9a4e94c4-4e3a-4&from=drop&id=u81d9a93c&originHeight=738&originWidth=1655&originalType=binary&ratio=1&rotation=0&showTitle=false&size=485373&status=done&style=none&taskId=ue3a675b9-80b8-4164-b03b-5c99f4c1e8e&title=)

## 4.5 无分类编址CIDR【构成超网】

### 4.5.1 介绍

![1620046014474.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023262727-0a903189-da43-48d4-b52b-b8693429ec57.png#averageHue=%23e8e0d6&clientId=u9a4e94c4-4e3a-4&from=drop&id=ue24022be&originHeight=677&originWidth=1576&originalType=binary&ratio=1&rotation=0&showTitle=false&size=462512&status=done&style=none&taskId=u7e092a26-7553-4a97-8b82-2bb7f71ee06&title=)

【例子】

![1620046123481.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023274616-3128bd8f-ae9c-4d8b-bac8-045d22d81139.png#averageHue=%23f5f2f2&clientId=u9a4e94c4-4e3a-4&from=drop&id=uc9e8e653&originHeight=403&originWidth=1561&originalType=binary&ratio=1&rotation=0&showTitle=false&size=208765&status=done&style=none&taskId=u05ea4ec4-b976-4ebc-938a-5c84a8cc4e1&title=)

### 4.5.2 构成超网

![1620046407311.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023286065-cee12a3f-9c92-4c0b-ae6e-ffa73aa77478.png#averageHue=%23f3f2f2&clientId=u9a4e94c4-4e3a-4&from=drop&id=u5110e040&originHeight=558&originWidth=1527&originalType=binary&ratio=1&rotation=0&showTitle=false&size=294092&status=done&style=none&taskId=ucb45de38-25b9-4451-9bd9-7fa53a45b94&title=)

### 4.5.3 最长前缀匹配

![1620046567361.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023307709-828e2859-640d-45a0-b296-6e21705e41f0.png#averageHue=%23efeeee&clientId=u9a4e94c4-4e3a-4&from=drop&id=uf729858c&originHeight=708&originWidth=1579&originalType=binary&ratio=1&rotation=0&showTitle=false&size=443358&status=done&style=none&taskId=u613448ea-c827-48db-8c15-8b542622808&title=)

【习题】

![1620046655950.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023323019-a77f29b7-a17c-44c3-9810-4a00426ef824.png#averageHue=%23f0eeee&clientId=u9a4e94c4-4e3a-4&from=drop&id=u457d6f47&originHeight=368&originWidth=1617&originalType=binary&ratio=1&rotation=0&showTitle=false&size=237627&status=done&style=none&taskId=u5abe65e9-0edd-45a5-b5a4-514838c0808&title=)

# 5. ARP协议

## 5.1 介绍

![1620047847800.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023344633-1fdce731-21be-490a-a3bc-acbe2f4c8b39.png#averageHue=%23edecec&clientId=u9a4e94c4-4e3a-4&from=drop&id=uc9cf8ec1&originHeight=696&originWidth=1546&originalType=binary&ratio=1&rotation=0&showTitle=false&size=535031&status=done&style=none&taskId=u37120f9f-b942-41f0-9853-b696cd1da31&title=)

## 5.2 发送数据的过程

【同一局域网络内】

![1620047277112.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023422551-79ca9fad-15d8-4da6-ba7c-943cc34dfd2d.png#averageHue=%23f0e7e2&clientId=u9a4e94c4-4e3a-4&from=drop&id=udbef5039&originHeight=622&originWidth=1629&originalType=binary&ratio=1&rotation=0&showTitle=false&size=317208&status=done&style=none&taskId=u88dfd68e-b4ef-4fa7-8403-0f8468c6d79&title=)

【不同局域网之间-01】

![1620047594623.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023440654-33e6d8c1-67cb-47ca-a093-af9f44609a51.png#averageHue=%23efe6e2&clientId=u9a4e94c4-4e3a-4&from=drop&id=u4683fbc0&originHeight=668&originWidth=1632&originalType=binary&ratio=1&rotation=0&showTitle=false&size=357280&status=done&style=none&taskId=u6b4b94c0-3121-42bb-a0d6-06af6ae8fd8&title=)

【不同局域网之间-02】

![1620047654045.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023454021-034d0a3b-9964-4bed-9d13-0147ac9e36b6.png#averageHue=%23eee6e1&clientId=u9a4e94c4-4e3a-4&from=drop&id=ue430274e&originHeight=656&originWidth=1632&originalType=binary&ratio=1&rotation=0&showTitle=false&size=352430&status=done&style=none&taskId=u6cd6d83a-cc68-4e44-88fb-cf7d1935abe&title=)

## 5.3 例题

![1620047928771.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023469226-b2995aa4-28ba-4e4a-b1b9-c5451ca80f70.png#averageHue=%23f4f2f2&clientId=u9a4e94c4-4e3a-4&from=drop&id=uba3f8b8d&originHeight=516&originWidth=1570&originalType=binary&ratio=1&rotation=0&showTitle=false&size=282553&status=done&style=none&taskId=u6779c3f6-cdfd-4cc3-9478-5e0fa9f82ed&title=)

# 6. DHCP协议

## 6.1 主机如何获取IP地址

1. 静态配置：【如，学校电脑室，由管理员手动配置， IP地址、子网掩码、默认网关】

![1620094119921.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023486132-e4304ff2-ae66-4306-86be-54ae250dc037.png#averageHue=%2373766f&clientId=u9a4e94c4-4e3a-4&from=drop&id=u16299256&originHeight=486&originWidth=1004&originalType=binary&ratio=1&rotation=0&showTitle=false&size=274452&status=done&style=none&taskId=udcb908e0-b810-462a-9594-ef1150a90d9&title=)

2. 动态配置【如，学校教室，人员流动大，手机、电脑等主机设备不固定】

![1620094215257.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023503404-d11b7c33-dffb-46e1-b8d4-fc4c96ff89ad.png#averageHue=%23aa9b89&clientId=u9a4e94c4-4e3a-4&from=drop&id=u06e45fe8&originHeight=501&originWidth=810&originalType=binary&ratio=1&rotation=0&showTitle=false&size=385889&status=done&style=none&taskId=u412c059d-340b-4fca-b6e4-8630ff55ec7&title=)

## 6.2 DHCP 介绍

![1620093810055.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023517969-99039ccf-b5a5-480f-83e6-a33de29a6b53.png#averageHue=%23eeeeee&clientId=u9a4e94c4-4e3a-4&from=drop&id=u7f52f439&originHeight=696&originWidth=1617&originalType=binary&ratio=1&rotation=0&showTitle=false&size=529564&status=done&style=none&taskId=ufeaf263f-2b22-4775-94bf-288a678360a&title=)

# 7. ICMP协议

## 7.1 介绍

`网际控制报文协议`

![1620094727145.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023530054-b5a7fbe3-e24e-4cda-8b85-7ee0eb070db3.png#averageHue=%23f6f5de&clientId=u9a4e94c4-4e3a-4&from=drop&id=ufa206d02&originHeight=722&originWidth=1551&originalType=binary&ratio=1&rotation=0&showTitle=false&size=390538&status=done&style=none&taskId=uedd3c90f-1f42-4b7e-8500-e2ddfea1378&title=)

## 7.2 ICMP差错报文

### 7.2.1 五种类型

`第二点的源点抑制已经弃用`

![1620095020658.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023553794-825e4b95-cbfc-44f5-b096-8ce122d0bb92.png#averageHue=%23e8e7e7&clientId=u9a4e94c4-4e3a-4&from=drop&id=uf9d5cf88&originHeight=534&originWidth=1599&originalType=binary&ratio=1&rotation=0&showTitle=false&size=539076&status=done&style=none&taskId=u55fc578c-1462-42f3-912f-96ef70537dd&title=)

### 7.2.2 ICMP差错报文数据字段

![1620095294238.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023568299-7c4f7c90-368e-4974-a1da-42a4b208b40d.png#averageHue=%23f0e99b&clientId=u9a4e94c4-4e3a-4&from=drop&id=u7f51cdd4&originHeight=487&originWidth=1463&originalType=binary&ratio=1&rotation=0&showTitle=false&size=332698&status=done&style=none&taskId=u5333e8dd-277e-4638-a678-491d1f8f9e3&title=)

### 7.2.3 不发送ICMP差错报文的情况

![1620095373046.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023591562-4e2073c6-6017-496f-97c6-4eb99862a925.png#averageHue=%23eeeeee&clientId=u9a4e94c4-4e3a-4&from=drop&id=u3adc9d64&originHeight=419&originWidth=1486&originalType=binary&ratio=1&rotation=0&showTitle=false&size=202959&status=done&style=none&taskId=ued23a34d-8dfb-4768-9e9c-96fb1b3fb0a&title=)

## 7.3 ICMP询问报文

`第三和四种报文已经弃用`

![1620095569009.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023644088-94a55bea-46e9-40b1-a55f-60f77d2b86dd.png#averageHue=%23f0efef&clientId=u9a4e94c4-4e3a-4&from=drop&id=u22cd1ec4&originHeight=407&originWidth=1577&originalType=binary&ratio=1&rotation=0&showTitle=false&size=259759&status=done&style=none&taskId=u080bfe6a-8657-4ef3-ae2a-0304422875f&title=)

## 7.4 ICMP应用

![1620095739574.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023773240-a6c875de-4222-403e-aa5d-f32a880011ce.png#averageHue=%23f6f4f4&clientId=u9a4e94c4-4e3a-4&from=drop&id=ueacf1608&originHeight=611&originWidth=1507&originalType=binary&ratio=1&rotation=0&showTitle=false&size=286587&status=done&style=none&taskId=u357e222a-0b91-43d1-b9f3-026032d96ed&title=)

# 8. IPv6

## 8.1 为什么使用IPv6

1. 32位IPv4地址空间已分配殆尽
2. CIDR、NAT等技术的应用治标不治本
3. IPv6能从根本上解决地址耗尽的问题
4. 改进了源IPv4的首部结果，使其能快速处理、转发数据报
5. 支持QoS【Quality of Service 服务质量】指一个网络能够利用各种基础技术，为指定的网络通信提供更好的服务能力，是网络的一种安全机制，是用来解决网络延迟和阻塞等问题的一种技术。

## 8.2 IPv6数据报格式

【简图】

![1620096269037.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023831038-b206e114-11b6-4289-aed3-37857ce63780.png#averageHue=%23f4f3e4&clientId=u9a4e94c4-4e3a-4&from=drop&id=u6473f8d4&originHeight=343&originWidth=1576&originalType=binary&ratio=1&rotation=0&showTitle=false&size=183793&status=done&style=none&taskId=u2d45a5af-2643-4339-b133-37dc8799d3c&title=)

【详图】

![](resource/1620096492431.png#id=sq2OO&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)】![1620096492431.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023840888-a892ea4c-c16b-4eec-b6cb-4b6805ba1d93.png#averageHue=%23fcf593&clientId=u9a4e94c4-4e3a-4&from=drop&id=u4b5309d5&originHeight=775&originWidth=1655&originalType=binary&ratio=1&rotation=0&showTitle=false&size=505605&status=done&style=none&taskId=u6e92e244-c2f8-472e-b8c7-c19f48d55b7&title=)

## 8.3 IPv6 & IPv4

![1620096660109.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674023854596-1da15e3e-cc33-4aa3-9e5a-7e0f66cfabd2.png#averageHue=%23ebeaea&clientId=u9a4e94c4-4e3a-4&from=drop&id=u96d2117e&originHeight=547&originWidth=1556&originalType=binary&ratio=1&rotation=0&showTitle=false&size=485955&status=done&style=none&taskId=ub310a18e-cd57-4f3d-9125-38f28e99795&title=)

## 8.4 IPv6地址表示形式

![1620096751180.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674024884453-5330050e-e202-49e1-8f62-2a7b9a0d5307.png#averageHue=%23f1f0f0&clientId=u9a4e94c4-4e3a-4&from=drop&id=u75158d03&originHeight=520&originWidth=1368&originalType=binary&ratio=1&rotation=0&showTitle=false&size=209216&status=done&style=none&taskId=u75cf5bbc-1f46-4133-afce-f3e735cbf45&title=)

## 8.5 IPv6基本地址类型

![1620096930014.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674024899116-1b8bd3b3-c7f8-49b6-a58a-44d3c543b9fa.png#averageHue=%23f4f3f1&clientId=u9a4e94c4-4e3a-4&from=drop&id=u4d46dd10&originHeight=598&originWidth=1493&originalType=binary&ratio=1&rotation=0&showTitle=false&size=322428&status=done&style=none&taskId=u058a8f7e-339a-43a0-a9d4-b84139370f5&title=)

## 8.6 IPv6向IPv4过渡的策略

![1620097053729.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674024916737-4998ac0d-aa84-403e-8797-4c31792faff2.png#averageHue=%23eeeded&clientId=u9a4e94c4-4e3a-4&from=drop&id=u08e762a9&originHeight=644&originWidth=1546&originalType=binary&ratio=1&rotation=0&showTitle=false&size=606939&status=done&style=none&taskId=uf2e77135-2f91-41e4-b0d6-430c859dea2&title=)

# 9. 路由算法及相关路由协议

## 9.1 路由算法

### 9.1.1 路由表结构

![1620097406938.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674024935446-b8851cf1-2ee0-4420-bffb-30c9bf34fc9d.png#averageHue=%23f8f7f7&clientId=u9a4e94c4-4e3a-4&from=drop&id=u7e3148c9&originHeight=567&originWidth=1633&originalType=binary&ratio=1&rotation=0&showTitle=false&size=230740&status=done&style=none&taskId=uebf70edb-c098-4a1c-b684-a283b4de237&title=)

### 9.1.2 路由算法分类

![1620097573641.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674024944564-7303b8f0-2e6b-42ea-af60-f21f0c0573cf.png#averageHue=%23f4f4f4&clientId=u9a4e94c4-4e3a-4&from=drop&id=uae22b7cd&originHeight=643&originWidth=1633&originalType=binary&ratio=1&rotation=0&showTitle=false&size=545270&status=done&style=none&taskId=ucd6d0c20-3be0-4626-8f1d-2833fb78a8c&title=)

### 9.1.3 分层次的路由选择协议

![1620097732890.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674024980474-8f7a3454-a68f-43fc-a49d-29fa6c5278d5.png#averageHue=%23f0f0f0&clientId=u9a4e94c4-4e3a-4&from=drop&id=u818e718d&originHeight=655&originWidth=1529&originalType=binary&ratio=1&rotation=0&showTitle=false&size=367849&status=done&style=none&taskId=ub9252cf1-b0e6-4c2c-9af2-12d29ca08cd&title=)

![1620097748834.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674024991112-e7400a42-8769-42ac-82a0-5aee035d5833.png#averageHue=%23f3f2f2&clientId=u9a4e94c4-4e3a-4&from=drop&id=ueaa67f41&originHeight=303&originWidth=1494&originalType=binary&ratio=1&rotation=0&showTitle=false&size=188353&status=done&style=none&taskId=u6146ac95-2788-4c10-9a67-f9e17b74b89&title=)

## 9.2 RIP协议及距离向量算法

### 9.2.1 RIP协议

#### 9.2.1.1 介绍

![1620099752275.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025006777-f1d6bd2c-f35f-4bd0-a796-62547d2f4fdb.png#averageHue=%23efefef&clientId=u9a4e94c4-4e3a-4&from=drop&id=u3e149206&originHeight=742&originWidth=1630&originalType=binary&ratio=1&rotation=0&showTitle=false&size=576104&status=done&style=none&taskId=uca820b65-da14-4689-9bff-8e550858b0b&title=)

#### 9.2.1.2 RIP协议报文格式

![1620100899524.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025031899-1671c339-07ad-40ee-a6e5-fc4c05def0c5.png#averageHue=%23e2f1ac&clientId=u9a4e94c4-4e3a-4&from=drop&id=uef135447&originHeight=696&originWidth=1639&originalType=binary&ratio=1&rotation=0&showTitle=false&size=457461&status=done&style=none&taskId=u40f6ed97-a674-4e2b-a43f-1c928e4f773&title=)

#### 9.2.1.3 特点

`好消息传的快，坏消息传的慢`

![1620100966990.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025053094-29117d7b-7ae3-4608-a06e-2c84aa064085.png#averageHue=%23f2f2e4&clientId=u9a4e94c4-4e3a-4&from=drop&id=u51ea84e2&originHeight=529&originWidth=1634&originalType=binary&ratio=1&rotation=0&showTitle=false&size=405983&status=done&style=none&taskId=ub8655335-faab-4623-9900-197a5a84a29&title=)

![1620101109168.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025098012-e9fd4c4b-817f-4842-ab21-ffd6278ccac0.png#averageHue=%23f8f6dc&clientId=u9a4e94c4-4e3a-4&from=drop&id=u8e6c8041&originHeight=519&originWidth=1562&originalType=binary&ratio=1&rotation=0&showTitle=false&size=416913&status=done&style=none&taskId=u30b7bddd-babd-4478-8190-b04143bf961&title=)

![1620101178026.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025113497-c359afba-7a47-4a5d-9157-1e3c03993f67.png#averageHue=%23f9f7e4&clientId=u9a4e94c4-4e3a-4&from=drop&id=ue9588631&originHeight=539&originWidth=1530&originalType=binary&ratio=1&rotation=0&showTitle=false&size=417366&status=done&style=none&taskId=u17fad4f0-92fb-4481-8cfb-d01611d02ee&title=)

![1620101194124.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025125696-559c047f-520b-442b-ac9b-d80ec6ab0d51.png#averageHue=%23f9f7ec&clientId=u9a4e94c4-4e3a-4&from=drop&id=ue6560dde&originHeight=484&originWidth=1530&originalType=binary&ratio=1&rotation=0&showTitle=false&size=305075&status=done&style=none&taskId=uba652563-53ae-47c0-b4f0-bd19e22336f&title=)

![1620101221030.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025134219-6f2280e1-7aa8-4a19-a26f-7b4b6f9c43af.png#averageHue=%23f6f5de&clientId=u9a4e94c4-4e3a-4&from=drop&id=u42e05bb8&originHeight=665&originWidth=1495&originalType=binary&ratio=1&rotation=0&showTitle=false&size=407936&status=done&style=none&taskId=ud07f208b-e0c0-40c6-ab95-b33c30deaff&title=)

### 9.2.2 路由信息交换规则

![1620100006910.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025211264-2f880ce2-f036-4ebd-8c1f-2496b5644924.png#averageHue=%23f1f0f0&clientId=u9a4e94c4-4e3a-4&from=drop&id=u3902a5d7&originHeight=728&originWidth=1589&originalType=binary&ratio=1&rotation=0&showTitle=false&size=623408&status=done&style=none&taskId=ubf23fa71-3716-4c41-9f5a-d22d6773b2f&title=)

### 9.2.3 距离向量算法

![1620100432774.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025226370-87556646-3da2-4db2-8da2-77b585aac724.png#averageHue=%23efefef&clientId=u9a4e94c4-4e3a-4&from=drop&id=ua2a092b4&originHeight=716&originWidth=1566&originalType=binary&ratio=1&rotation=0&showTitle=false&size=528906&status=done&style=none&taskId=u2fb942f2-ddab-4c1d-ba6a-41b221ad42e&title=)

【例题1】

![1620100588930.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025260847-adc67b25-782e-499a-9d55-4cdfadfe5dce.png#averageHue=%23fbfbfa&clientId=u9a4e94c4-4e3a-4&from=drop&id=u81d53843&originHeight=707&originWidth=1646&originalType=binary&ratio=1&rotation=0&showTitle=false&size=434262&status=done&style=none&taskId=uf800a496-7e08-49f8-b1a7-312d5e713b4&title=)

【例题2】

![1620100776711.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025273527-b8fec7c3-1cef-43c5-9903-abac2778b54f.png#averageHue=%23eeeded&clientId=u9a4e94c4-4e3a-4&from=drop&id=u99a31da8&originHeight=641&originWidth=1603&originalType=binary&ratio=1&rotation=0&showTitle=false&size=450014&status=done&style=none&taskId=uf3474b41-cdd5-4fe8-a3bb-ced22f6b3a6&title=)

### 9.2.4 小结

![1620101290859.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025290753-be4350ac-369f-4f0e-bf99-4aad22021af6.png#averageHue=%23f9f9f9&clientId=u9a4e94c4-4e3a-4&from=drop&id=u91929663&originHeight=619&originWidth=1686&originalType=binary&ratio=1&rotation=0&showTitle=false&size=279105&status=done&style=none&taskId=u0499ed96-c0ff-46c7-9850-68a302bb307&title=)

## 9.3 OSPF协议及链路状态算法

### 9.3.1 OSPF协议

![1620113403966.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025306669-e716c833-4da9-4478-bfec-f48f09c4277d.png#averageHue=%23e8e8e8&clientId=u9a4e94c4-4e3a-4&from=drop&id=u50ceb862&originHeight=577&originWidth=1653&originalType=binary&ratio=1&rotation=0&showTitle=false&size=529273&status=done&style=none&taskId=u10217d87-4f3a-4406-bf07-2023c8abf16&title=)

### 9.3.2 链路状态路由算法

![1620113625354.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025318331-86b8a226-a8f4-4477-a13b-09e14798180c.png#averageHue=%23ebebeb&clientId=u9a4e94c4-4e3a-4&from=drop&id=u68de85d6&originHeight=609&originWidth=1608&originalType=binary&ratio=1&rotation=0&showTitle=false&size=487101&status=done&style=none&taskId=uebd7a0e5-a7d6-4c57-8fb0-c47fa0858fe&title=)

### 9.3.3 OSPF的区域

![1620113763969.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025327547-d921f6fd-a15a-4bdd-84e4-4c9450bb89dc.png#averageHue=%23cdd5c4&clientId=u9a4e94c4-4e3a-4&from=drop&id=ua210f5e2&originHeight=689&originWidth=1487&originalType=binary&ratio=1&rotation=0&showTitle=false&size=728021&status=done&style=none&taskId=u2ef580f5-5f4a-4877-99db-47fa7353ca2&title=)

### 9.3.4 OSPF分组情况

![1620113819049.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025345092-25a4aa03-309b-410f-8dfb-f382ed2c00fa.png#averageHue=%23f0eda1&clientId=u9a4e94c4-4e3a-4&from=drop&id=udd0c9838&originHeight=403&originWidth=1564&originalType=binary&ratio=1&rotation=0&showTitle=false&size=187699&status=done&style=none&taskId=ufa8d98a7-e4f1-4ec5-9d0f-7f409bbcc63&title=)

### 9.3.5 其他特点

![1620113895873.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025370296-e1e1491c-2008-417c-82b5-ba33f2527562.png#averageHue=%23e6e4e4&clientId=u9a4e94c4-4e3a-4&from=drop&id=ucf16db93&originHeight=214&originWidth=1564&originalType=binary&ratio=1&rotation=0&showTitle=false&size=199202&status=done&style=none&taskId=ubcf55527-a77d-4889-95ce-824639fa725&title=)

## 9.4 BGP协议

### 9.4.1 介绍

![1620113987626.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025383778-79abdffc-6d6b-4bf7-b7cb-23458e0d2626.png#averageHue=%23f3f2db&clientId=u9a4e94c4-4e3a-4&from=drop&id=ub0d5288f&originHeight=682&originWidth=1502&originalType=binary&ratio=1&rotation=0&showTitle=false&size=527126&status=done&style=none&taskId=u3d3b2db4-0b1c-438c-a67d-1def0768f78&title=)

### 9.4.2 BGP协议交换信息的过程

![1620114149635.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025396837-387ef794-2ef8-4f26-a925-34d4bc000d7a.png#averageHue=%23f3f2f2&clientId=u9a4e94c4-4e3a-4&from=drop&id=u2e99eea2&originHeight=578&originWidth=1546&originalType=binary&ratio=1&rotation=0&showTitle=false&size=293279&status=done&style=none&taskId=u3f377f35-3ef5-42d1-b99e-9f0630803e9&title=)

![1620114218495.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025411036-ca13cc32-65f6-40f9-8017-41c58963d906.png#averageHue=%23f4f3df&clientId=u9a4e94c4-4e3a-4&from=drop&id=u274fd321&originHeight=661&originWidth=1528&originalType=binary&ratio=1&rotation=0&showTitle=false&size=411938&status=done&style=none&taskId=u89d87da8-a383-449c-b845-72d1ded054d&title=)

![1620114240132.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025428898-79db9ef1-e5a1-41b3-a6b9-f61b03a2ba53.png#averageHue=%23f5f3d9&clientId=u9a4e94c4-4e3a-4&from=drop&id=ud2c7f857&originHeight=705&originWidth=1511&originalType=binary&ratio=1&rotation=0&showTitle=false&size=445737&status=done&style=none&taskId=u6f089aab-f916-4622-805b-506a837ca94&title=)

### 9.4.3 BGP协议报文格式

![1620114310903.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025439834-71912de1-2ff9-41a6-9a4d-59472dd96250.png#averageHue=%23f2f1e5&clientId=u9a4e94c4-4e3a-4&from=drop&id=u67fd2295&originHeight=667&originWidth=1565&originalType=binary&ratio=1&rotation=0&showTitle=false&size=337616&status=done&style=none&taskId=u49469f65-6e84-41c8-9e45-ec29877fbbd&title=)

### 9.4.4 BGP协议特点

![1620114361910.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025491604-331cf19e-2447-4dab-8a50-e5a623f788c4.png#averageHue=%23e3e0e0&clientId=u9a4e94c4-4e3a-4&from=drop&id=ue20e331c&originHeight=183&originWidth=1580&originalType=binary&ratio=1&rotation=0&showTitle=false&size=223194&status=done&style=none&taskId=u2bd33330-5c43-4920-828e-051f3ed3114&title=)

### 9.4.5 BGP-4的四种报文

![1620114443629.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025504349-b600eced-4b0b-4059-b394-ff53ba2efdf8.png#averageHue=%23ece7e7&clientId=u9a4e94c4-4e3a-4&from=drop&id=uc37cf149&originHeight=282&originWidth=1501&originalType=binary&ratio=1&rotation=0&showTitle=false&size=235835&status=done&style=none&taskId=u3f326a54-32d4-436b-a610-e85c4aa8ad0&title=)

## 9.5 三种路由协议比较

![1620114506325.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025518618-5e138f81-d207-4ca0-b662-c0b10031fbf9.png#averageHue=%23e8e8e8&clientId=u9a4e94c4-4e3a-4&from=drop&id=u1546dd30&originHeight=259&originWidth=1575&originalType=binary&ratio=1&rotation=0&showTitle=false&size=236039&status=done&style=none&taskId=u558ba915-3c53-451d-a93e-035a47f7cc8&title=)

![1620114588661.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025524620-f11b495a-a4d7-4d6e-8781-65092f63e641.png#averageHue=%23e4e4e4&clientId=u9a4e94c4-4e3a-4&from=drop&id=u6fc52056&originHeight=521&originWidth=1596&originalType=binary&ratio=1&rotation=0&showTitle=false&size=259569&status=done&style=none&taskId=u55142f20-9464-43da-a1f6-a21f63285d6&title=)

# 10. IP组播

## 10.1 IP数据报的三种传输方式

![1620114833384.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025543310-5b2e9535-a055-4338-b07b-cb485473619a.png#averageHue=%23ede8e7&clientId=u9a4e94c4-4e3a-4&from=drop&id=u5203254f&originHeight=713&originWidth=1598&originalType=binary&ratio=1&rotation=0&showTitle=false&size=677547&status=done&style=none&taskId=u77e6c1fe-213c-476d-b07e-3b29bb4c41c&title=)

【单播模式下-IP数据报的发送】

![1620116550096.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025568753-898b2b19-a964-4e2a-baa9-c88418bd2bcc.png#averageHue=%23f2f0ee&clientId=u9a4e94c4-4e3a-4&from=drop&id=ube219f4b&originHeight=742&originWidth=1485&originalType=binary&ratio=1&rotation=0&showTitle=false&size=340948&status=done&style=none&taskId=ue0474d82-796d-4a73-a343-9c1cab59d06&title=)

【组播模式下-IP数据报的发送】

![1620116628519.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025580876-22af6043-6d3d-4501-a24d-7cc9d940bc61.png#averageHue=%23f0efee&clientId=u9a4e94c4-4e3a-4&from=drop&id=u1e057d94&originHeight=740&originWidth=1525&originalType=binary&ratio=1&rotation=0&showTitle=false&size=462778&status=done&style=none&taskId=uc3887fa7-20a2-49f4-8d1b-6b8d022eaa1&title=)

## 10.2 IP组播地址

![1620116823094.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025593611-fab09236-6752-4caa-878e-655e048e14a8.png#averageHue=%23f1f0f0&clientId=u9a4e94c4-4e3a-4&from=drop&id=u1e2b0ff6&originHeight=783&originWidth=1569&originalType=binary&ratio=1&rotation=0&showTitle=false&size=512096&status=done&style=none&taskId=u5ffb373d-8aec-4b3f-8d35-9ab23084cf6&title=)

## 10.3 硬件组播

![1620117053629.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025607679-8f7b9765-0fa7-4ac6-8e9d-db7053857a9e.png#averageHue=%23f0f0f0&clientId=u9a4e94c4-4e3a-4&from=drop&id=u9f63b78b&originHeight=690&originWidth=1597&originalType=binary&ratio=1&rotation=0&showTitle=false&size=502378&status=done&style=none&taskId=u147fb6cb-1d54-4f80-a7c1-258b02afced&title=)

## 10.4 IGMP协议与组播路由协议

### 10.4.1 IGMP协议

`网际组管理协议IGMP`

#### 10.4.1.1 协议工作图解

![1620117315176.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025623168-ae762f44-15bd-4317-a415-441fa4e9f9c9.png#averageHue=%23ecebe6&clientId=u9a4e94c4-4e3a-4&from=drop&id=u0db8c6ea&originHeight=722&originWidth=1511&originalType=binary&ratio=1&rotation=0&showTitle=false&size=454240&status=done&style=none&taskId=ua028e0b6-ef6b-433a-ab22-9e2c0a80b0e&title=)

#### 10.4.1.2 协议在TCP/IP协议簇中的位置

![1620117353077.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025635355-47f4722f-f504-42d2-85ea-3695241216f8.png#averageHue=%23a46526&clientId=u9a4e94c4-4e3a-4&from=drop&id=uc51d9b8d&originHeight=587&originWidth=1542&originalType=binary&ratio=1&rotation=0&showTitle=false&size=119973&status=done&style=none&taskId=ud4f0d242-25d4-438c-9f0a-1d301ec4afd&title=)

#### 10.4.1.3 IGMP工作的两个阶段

![1620117456653.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025647838-1587f56c-b2cc-44d6-b2fc-5d7f79df9681.png#averageHue=%23eae9e9&clientId=u9a4e94c4-4e3a-4&from=drop&id=uf65e92af&originHeight=494&originWidth=1544&originalType=binary&ratio=1&rotation=0&showTitle=false&size=426229&status=done&style=none&taskId=u04876890-3bae-4d7c-bbeb-6f9245bc82c&title=)

### 10.4.2 组播路由选择协议

#### 10.4.2.1 介绍

![1620117561336.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025658056-848fd458-feb4-418c-947c-4add59d33ddb.png#averageHue=%23f5f5f5&clientId=u9a4e94c4-4e3a-4&from=drop&id=ubedaa565&originHeight=746&originWidth=1519&originalType=binary&ratio=1&rotation=0&showTitle=false&size=322932&status=done&style=none&taskId=uba929969-3ceb-45b2-a915-94c613b241c&title=)

#### 10.4.2.2 常使用的三种算法

![1620117640444.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025669041-ff413701-b2f8-43f5-8abb-6a788eb16e4a.png#averageHue=%23f4f4f4&clientId=u9a4e94c4-4e3a-4&from=drop&id=u32c96e4d&originHeight=380&originWidth=1357&originalType=binary&ratio=1&rotation=0&showTitle=false&size=217768&status=done&style=none&taskId=ucdb0a65e-f803-4a46-a07c-df36a6c7805&title=)

# 11. 移动IP

## 11.1 相关术语

![1620117809438.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025679538-2de335b3-8daf-4f5a-8119-2edc681444fe.png#averageHue=%23ececec&clientId=u9a4e94c4-4e3a-4&from=drop&id=u52c46c6c&originHeight=477&originWidth=1554&originalType=binary&ratio=1&rotation=0&showTitle=false&size=446235&status=done&style=none&taskId=u2d476907-005b-4ffa-bd31-3e6954c2bec&title=)

## 11.2 通信过程

![1620117989923.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025688183-9d24cbc2-0fe9-4b53-8260-e7791586a444.png#averageHue=%23f0ecea&clientId=u9a4e94c4-4e3a-4&from=drop&id=u85d5e88f&originHeight=747&originWidth=1650&originalType=binary&ratio=1&rotation=0&showTitle=false&size=516299&status=done&style=none&taskId=uf057ee9a-84e1-4b6e-85c2-114b20c146b&title=)

![1620118048071.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025709307-80e60278-28fc-4f9e-a17f-33f83808a401.png#averageHue=%23f8f8f8&clientId=u9a4e94c4-4e3a-4&from=drop&id=u0b4477d8&originHeight=391&originWidth=1629&originalType=binary&ratio=1&rotation=0&showTitle=false&size=147954&status=done&style=none&taskId=u0c02431e-16b0-4bb5-85ef-434cbe08fb2&title=)

# 12. 网络层设备

## 12.1 路由器

### 12.1.1 介绍

![1620118187636.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025726151-6cbcb6e6-5635-4c99-a394-520e3e1fb036.png#averageHue=%23ebcd71&clientId=u9a4e94c4-4e3a-4&from=drop&id=u8ffdbe5d&originHeight=693&originWidth=1629&originalType=binary&ratio=1&rotation=0&showTitle=false&size=747366&status=done&style=none&taskId=u507ff9db-7d8b-4771-ae18-4729b6cddcb&title=)

### 12.1.2 输入端口对线路上收到的分组的处理

![1620118295845.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025739557-9170a278-7d8c-421e-9e64-ec43165ce6b7.png#averageHue=%23f0ec79&clientId=u9a4e94c4-4e3a-4&from=drop&id=ubd05c5b5&originHeight=459&originWidth=1198&originalType=binary&ratio=1&rotation=0&showTitle=false&size=203924&status=done&style=none&taskId=u780ced9b-9a24-47e6-b835-3e2f5bb03b6&title=)

### 12.1.3 输出端口将交换结果传送来的分组发送到线路

![1620118446489.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025750123-14d4bd45-f4f7-430b-a1bb-ed2bebd9c15f.png#averageHue=%23f0eb75&clientId=u9a4e94c4-4e3a-4&from=drop&id=ub8e7469e&originHeight=577&originWidth=1437&originalType=binary&ratio=1&rotation=0&showTitle=false&size=365526&status=done&style=none&taskId=u5b6822bd-3507-44ea-93a1-0e49ea77889&title=)

## 12.2 三层设备的区别

![1620118542666.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025760217-2f4a0855-a81a-4f10-a385-3cacf790a0b4.png#averageHue=%23cedbbf&clientId=u9a4e94c4-4e3a-4&from=drop&id=ub1a99c5d&originHeight=667&originWidth=1625&originalType=binary&ratio=1&rotation=0&showTitle=false&size=260660&status=done&style=none&taskId=u26a1c31e-8d61-4dd1-8e64-68cc7d280a2&title=)

## 12.3 路由表与路由转发

![1620118630369.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674025771330-01939977-ded1-49c7-9d6c-adffa52fe5c7.png#averageHue=%23f9f9f7&clientId=u9a4e94c4-4e3a-4&from=drop&id=u5b860b2a&originHeight=637&originWidth=1660&originalType=binary&ratio=1&rotation=0&showTitle=false&size=305408&status=done&style=none&taskId=u1dab41ac-ff5f-40fd-8153-911df5cf909&title=)
