[TOC]

# 1. 基本概念

![1619855628101.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674010692298-1b42b3d9-9c23-46fb-bdcf-7a7efc97548e.png#averageHue=%23fbfbfb&clientId=ud50343c9-f654-4&from=drop&id=uecae2009&originHeight=370&originWidth=920&originalType=binary&ratio=1&rotation=0&showTitle=false&size=147663&status=done&style=none&taskId=u9ca634d6-8a41-49f1-b89a-27bab307142&title=)

`结点`：主机、路由器

`链路`：网络中两个结点之间的**物理通道**，链路的传输介质主要有双绞线、光纤和微波。分为有线链路、无线链路

`数据链路`：网络中两个结点之间的**逻辑通道**，把实现控制数据传输协议的硬件和软件加到链路上就构成数据链路

`帧`：链路层的协议数据单元，封装网络层数据报

> `数据链路层`负责从一个结点(通过一条链路)向另一个物理链路直接相连的相邻结点传送数据报


# 2. 功能概述

![1619857048839.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674010711293-6bbef8be-6cbd-4898-b209-6c66a629dccb.png#averageHue=%23f3f1ee&clientId=ud50343c9-f654-4&from=drop&id=u94307405&originHeight=540&originWidth=1587&originalType=binary&ratio=1&rotation=0&showTitle=false&size=363837&status=done&style=none&taskId=u5644fb96-7bc8-4445-853a-13e46a5387e&title=)

	在物理层提供的服务的基础上`向网络层提供服务`，其`最基本的服务`是将源自网络层的数据`可靠地`传输到相邻结点的目标机网络层。其`主要作用`是**加强物理层传输原始比特流的功能**，将物理层提供的可能出错的物理连接改造成为`逻辑上无差错的数据链路`，使之对网络层表现为一条无差错的链路。

`功能一`：为网络层提供服务。无确认无连接服务、有确认无连接服务、有确认面向连接服务。(有连接一定有确认)

`功能二`：链路管理，即连接的建立、维持、释放【用于面向连接的服务】

`功能三`：组帧

`功能四`：流量控制【限制发送方】

`功能五`：差错控制【帧错/位错】

# 3. 封装成帧

	在一段数据的前后部分添加`首部和尾部`，构成一个帧。接收端在收到物理层上交的比特流后，就能根据首部和尾部的标记，从收到的比特流中`识别帧的开始和结束`。
	
	首部和尾部包含许多的控制信息，他们的一个重要作用是`帧定界`【确定帧的界限】
	
	`帧同步`：接收方应当能从接收到的二进制比特流中区分出帧的开始和终止
	
	`组帧的四种方法`：字符计数法、字符（节）填充法、零比特填充法、违规编码法

![1619858508659.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674010740278-733e9c11-4ba9-4733-8bcf-3639907dac1b.png#averageHue=%23f2e7e0&clientId=ud50343c9-f654-4&from=drop&id=u3bb666d2&originHeight=325&originWidth=1136&originalType=binary&ratio=1&rotation=0&showTitle=false&size=81317&status=done&style=none&taskId=u981ac4fd-93da-4939-a74f-d260b6571eb&title=)

# 4. 透明传输

## 4.1 简介

![1619858972476.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674010757203-115ae9ae-c902-45b9-85e5-8bee9db88c82.png#averageHue=%23ecebe9&clientId=ud50343c9-f654-4&from=drop&id=u34ec6bfd&originHeight=623&originWidth=1606&originalType=binary&ratio=1&rotation=0&showTitle=false&size=431741&status=done&style=none&taskId=u1f0dc52d-bd9b-4c1e-9f02-5f6a5cefc60&title=)

## 4.2 组帧方法

### 4.2.1 字符计数法

![1619859195239.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674010771870-d1ccb249-b224-409e-bdb6-5db0b3f49c04.png#averageHue=%23eaeaea&clientId=ud50343c9-f654-4&from=drop&id=u63ce10b1&originHeight=374&originWidth=1324&originalType=binary&ratio=1&rotation=0&showTitle=false&size=171105&status=done&style=none&taskId=ud2fc9418-3e4f-4e29-b2bf-b38947cf299&title=)

`缺点`：当首个计数字段出错时，会导致后续所有帧的识别错误

### 4.2.2 字符（节）填充法

![1619859280726.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674010799490-bbde4b48-4fe7-4ae0-a1e5-e0838dae864e.png#averageHue=%23e7e5e5&clientId=ud50343c9-f654-4&from=drop&id=u6dcdcc75&originHeight=101&originWidth=1480&originalType=binary&ratio=1&rotation=0&showTitle=false&size=135448&status=done&style=none&taskId=u17f18764-60b7-4511-9ba0-fe15cc25da0&title=)

![1619859299373.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674010807876-798b1f18-4b4b-4f87-9d34-cb5517da7e29.png#averageHue=%23e3bfaa&clientId=ud50343c9-f654-4&from=drop&id=ub74e95fe&originHeight=182&originWidth=1346&originalType=binary&ratio=1&rotation=0&showTitle=false&size=101307&status=done&style=none&taskId=u73ed0d2f-bbd4-46ac-b7da-90eb8de7526&title=)

![1619859317069.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674010815465-de159a3a-8374-477a-b00a-b53b9be30e39.png#averageHue=%23f1ecec&clientId=ud50343c9-f654-4&from=drop&id=uff79d8d2&originHeight=118&originWidth=1404&originalType=binary&ratio=1&rotation=0&showTitle=false&size=124841&status=done&style=none&taskId=ueaa4d8ec-a2c9-4837-a4b3-b9f097e2352&title=)

**【此时有可能发生以下错误】**

![](resource/1619859332919.png#id=Q9ZRn&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)![1619859332919.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674010821832-0a72198e-7bf9-4a86-8390-06297e97ff00.png#averageHue=%23ead5ca&clientId=ud50343c9-f654-4&from=drop&id=ucc122836&originHeight=268&originWidth=1352&originalType=binary&ratio=1&rotation=0&showTitle=false&size=151671&status=done&style=none&taskId=ue0c4df4f-5235-4ec2-a9a2-7748d2d8d13&title=)

**【解决方案】**

![1619859411827.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674010851213-f72e20d5-f929-4179-a581-c51b004accdb.png#averageHue=%23ecccba&clientId=ud50343c9-f654-4&from=drop&id=ua365cdfc&originHeight=672&originWidth=1606&originalType=binary&ratio=1&rotation=0&showTitle=false&size=276494&status=done&style=none&taskId=u21798cbe-531c-4675-aa9d-fa4fefac598&title=)

### 4.2.3 零比特填充法

![1619859470667.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674010868239-3f32d4bb-0844-43ec-bac6-132f233687f5.png#averageHue=%23ebe2dc&clientId=ud50343c9-f654-4&from=drop&id=u5afbb52b&originHeight=628&originWidth=1424&originalType=binary&ratio=1&rotation=0&showTitle=false&size=436595&status=done&style=none&taskId=ub50dd1ae-b140-42e9-ad7e-fa684fc777e&title=)

### 4.2.4 违规编码法

![1619859515800.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674010880002-823dc749-3e41-4190-afe2-914202e37b29.png#averageHue=%23f3f3f3&clientId=ud50343c9-f654-4&from=drop&id=u2cb6b4c8&originHeight=458&originWidth=1510&originalType=binary&ratio=1&rotation=0&showTitle=false&size=185854&status=done&style=none&taskId=u19171fb1-8897-4e0d-b175-661f798d247&title=)

# 5. 差错控制

## 5.1 差错来源

![1619859700616.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674010890664-12881a08-81d0-470c-9948-10941f5c6b99.png#averageHue=%23efeeee&clientId=ud50343c9-f654-4&from=drop&id=u29cfaf90&originHeight=716&originWidth=1512&originalType=binary&ratio=1&rotation=0&showTitle=false&size=530311&status=done&style=none&taskId=uc5432f17-fe9c-417d-97eb-491c86a5a66&title=)

> `为什么要在链路层进行差错控制`：当两台主机通信需要经过一台交换机和20台路由器时，若经过第一个路由器时帧已经发生了错误，则此时路由器的链路层可以发现错误并丢弃，减少了错误帧继续传递所造成的资源浪费。
>  
> ![1619860002179.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674010900905-6553ce3b-02a9-49fd-a143-1f98f5836c13.png#averageHue=%23f3efee&clientId=ud50343c9-f654-4&from=drop&id=ud3de411b&originHeight=172&originWidth=1381&originalType=binary&ratio=1&rotation=0&showTitle=false&size=122978&status=done&style=none&taskId=u33845ffa-0332-474b-96d5-9d9e97dd67b&title=)


## 5.2 比特错误
![1619875982965.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674010910916-d5c29bec-62e9-4bf3-a194-2354a677daef.png#averageHue=%23f4f2f1&clientId=ud50343c9-f654-4&from=drop&id=ub47187ed&originHeight=272&originWidth=1196&originalType=binary&ratio=1&rotation=0&showTitle=false&size=103001&status=done&style=none&taskId=u74f23ec6-3f2d-4e54-84b2-706935c64d1&title=)

> 编码 VS 编码
>  
> `数据链路层编码`和`物理层的数据编码与调制`不同。
>  
> - 物理层编码针对的是`单个比特`，解决传输过程中比特的同步等问题，如曼彻斯特编码。
> - 数据链路层的编码针对的是`一组比特`，通过冗余码的技术实现一组二进制比特串在传输过程中是否出现了差错。
> 

> `冗余编码`：在数据发送之前，先按某种关系附加上一定的冗余位，构成一个符合某一规则的码字后再发送。当要发送的有效数据变化时，相应的冗余位也随之变化，使码字遵从不变的规则。接收端根据收到码字是否仍符合原规则来判断是否出错。


### 5.3.1 检错编码之奇偶校验码

![1619877096751.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674010926311-4d23639c-8696-4b15-a0fd-32ad3c556ccd.png#averageHue=%23f2f1f1&clientId=ud50343c9-f654-4&from=drop&id=uf439c4c8&originHeight=726&originWidth=1631&originalType=binary&ratio=1&rotation=0&showTitle=false&size=417482&status=done&style=none&taskId=u4be7593d-6aaa-48bc-a3c3-7eaee94b2fa&title=)

### 5.3.2 检错编码之CRC循环冗余码

【冗余码计算】

![1619924512084.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674010941738-4c410271-a6f6-4a7a-8b25-6a6b4fc8bd14.png#averageHue=%23efedec&clientId=ud50343c9-f654-4&from=drop&id=ueb32d66f&originHeight=792&originWidth=1605&originalType=binary&ratio=1&rotation=0&showTitle=false&size=682051&status=done&style=none&taskId=u688b2d45-3b67-49e1-bfaf-b6820e60df2&title=)

【接收端检错】

![1619924649321.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674010954110-fc710264-f706-41cc-bc9e-cf395186d024.png#averageHue=%23ededed&clientId=ud50343c9-f654-4&from=drop&id=u859b71a9&originHeight=675&originWidth=1549&originalType=binary&ratio=1&rotation=0&showTitle=false&size=399818&status=done&style=none&taskId=ub2da3eeb-df4b-4a33-9d91-87e2ff2b60a&title=)

【注意】

![1619924734910.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674010977053-d650ae67-db9c-4fb6-b13d-b1f5b9b722c9.png#averageHue=%23d8d8d8&clientId=ud50343c9-f654-4&from=drop&id=u0ffda801&originHeight=224&originWidth=1505&originalType=binary&ratio=1&rotation=0&showTitle=false&size=326006&status=done&style=none&taskId=u8bcc9856-d208-4682-863f-02089ec981a&title=)

### 5.3.3 纠错编码--海明码

`海明码`：可以发现`双比特错误`，只能纠正`单比特错误`

工作原理：动一发而牵全身

工作流程：

![1619924954290.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674010994481-61ae258e-104c-4517-8cf4-db37952d69e9.png#averageHue=%23cda993&clientId=ud50343c9-f654-4&from=drop&id=u1e72c28c&originHeight=228&originWidth=1532&originalType=binary&ratio=1&rotation=0&showTitle=false&size=195591&status=done&style=none&taskId=u5827f989-07bf-4d17-bc3f-80826ece83f&title=)

计算过程：

【确定校验码位数r】

![1619925048353.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011007251-05cd9927-2c35-45bf-bb1a-cfce753c950e.png#averageHue=%23ebeae9&clientId=ud50343c9-f654-4&from=drop&id=u73d70ff9&originHeight=299&originWidth=1425&originalType=binary&ratio=1&rotation=0&showTitle=false&size=199729&status=done&style=none&taskId=u3a347e24-730c-4221-b9c7-25f5e24f4c3&title=)

【确定检验码和数据的位置】

![1619925104223.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011020209-be241b7f-0e1e-4877-a0da-d2acbcde09f7.png#averageHue=%23f8faf8&clientId=ud50343c9-f654-4&from=drop&id=u82a80b9a&originHeight=371&originWidth=1533&originalType=binary&ratio=1&rotation=0&showTitle=false&size=214322&status=done&style=none&taskId=u5f7cfb63-d1b7-40c0-b75d-3a64771ff05&title=)

【求出校验码的值】

![1619925201272.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011029194-c621e0f6-80b9-4d88-9916-7ca14c7022df.png#averageHue=%23fbfcfa&clientId=ud50343c9-f654-4&from=drop&id=ue2b4018f&originHeight=707&originWidth=1541&originalType=binary&ratio=1&rotation=0&showTitle=false&size=602948&status=done&style=none&taskId=u7080cf4b-c9da-46e2-b388-7982bda33df&title=)

【检错并纠错】

![1619925280580.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011040776-ab9953d5-5134-485b-b90e-8123a051f795.png#averageHue=%23fbfaf8&clientId=ud50343c9-f654-4&from=drop&id=u5937620c&originHeight=732&originWidth=1504&originalType=binary&ratio=1&rotation=0&showTitle=false&size=661939&status=done&style=none&taskId=ubd015cd2-c5b3-4ee2-877d-a60d6e1077b&title=)

# 6. 流量控制、可靠传输、滑动窗口

![1619926424841.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011072997-1b1a861a-b3e6-40fe-b8df-d6c081941318.png#averageHue=%23ededed&clientId=ud50343c9-f654-4&from=drop&id=ufdf58223&originHeight=337&originWidth=1310&originalType=binary&ratio=1&rotation=0&showTitle=false&size=172236&status=done&style=none&taskId=u0cf2b230-6b29-4cb8-a5df-e2f56d95455&title=)

## 6.1 流量控制

### 6.1.1 缘由

	发送端`较高的发送速度`和接收端`较低的接收能力`的不匹配，会造成传输出错，因此流量控制也是数据链路层一项重要工作。

> `数据链路层流量控制`与`传输层流量控制`区别：
>  
> - 数据链路层的流量控制是点对点的，而传输层的流量控制是端到端的
> - 数据链路层流量控制的手段：接收方收不下就不回复确认
> - 传输层流量控制手段：接收端给发送端一个窗口公告


### 6.1.2 流量控制的方法

![1619925976746.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011103778-b812e540-9f54-49f5-b5bb-32314217e7a0.png#averageHue=%23f5f5f5&clientId=ud50343c9-f654-4&from=drop&id=ubd1cdef8&originHeight=695&originWidth=1553&originalType=binary&ratio=1&rotation=0&showTitle=false&size=521403&status=done&style=none&taskId=uf0f5e169-bd60-415a-8c33-ed6b51911e2&title=)

> 【各协议发送窗口与接收窗口的大小】
>  
> `停止-等待协议`：发送窗口大小=1， 接收窗口大小=1
>  
> `后退N帧协议(GBN)`：发送窗口大小>1，接收窗口大小=1
>  
> `选择重传协议(SR)`：发送窗口大小>1，接收窗口大小>1
>  
> 在数据链路层，窗口大小是固定的。


## 6.2 流量控制之停止-等待协议

### 6.2.1 为什么需要该协议

1.  为了实现流量控制 
2.  除了比特出差错，底层信道还会出现丢包问题
`丢包`：由物理线路故障、设备故障、病毒攻击、路由信息错误等原因导致的数据包的丢失 

### 6.2.2 研究的前提

- 虽然现在常用全双工通信方式，但是为了讨论的方便，仅考虑一方为发送方，一方为接收方的情况。
- 由于是在讨论可靠传输的原理，故暂不考虑数据是在哪一层次上传送的
- `停止-等待`就是每发送完一个分组就停止发送，等待对方确认后再发送下一个分组

### 6.2.3 停止-等待协议的应用情况

#### 6.2.3.1 无差错情况

![1619927175051.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011131793-08201db1-691e-45a3-b9c0-b06bcf3a04c9.png#averageHue=%23f6f6f6&clientId=ud50343c9-f654-4&from=drop&id=u3076b4b8&originHeight=683&originWidth=1543&originalType=binary&ratio=1&rotation=0&showTitle=false&size=288601&status=done&style=none&taskId=ubd59c5c0-23aa-4676-a905-795dc96f7e2&title=)

#### 6.2.3.2 有差错情况

1. 数据帧丢失或者检测到帧出错

![1619927401805.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011156586-fd432db7-408a-491f-b365-1582c65c9ac2.png#averageHue=%23f4f3f3&clientId=ud50343c9-f654-4&from=drop&id=u17c30d94&originHeight=628&originWidth=1650&originalType=binary&ratio=1&rotation=0&showTitle=false&size=349052&status=done&style=none&taskId=uc84424fd-9c8c-45af-8696-298bfe22cea&title=)

2. ACK丢失

![1619927469424.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011200228-53345234-97df-4e02-8a50-2a17ce11dbb8.png#averageHue=%23f6f6f6&clientId=ud50343c9-f654-4&from=drop&id=u583609d6&originHeight=635&originWidth=1542&originalType=binary&ratio=1&rotation=0&showTitle=false&size=280492&status=done&style=none&taskId=ubd12b51e-244d-4cf6-aea0-e2c7fae2c08&title=)

3. ACK迟到

![1619927549635.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011222133-320004cf-3ebb-4711-9cf9-88d289d279cb.png#averageHue=%23f6f6f6&clientId=ud50343c9-f654-4&from=drop&id=u0160e1a8&originHeight=635&originWidth=1444&originalType=binary&ratio=1&rotation=0&showTitle=false&size=265053&status=done&style=none&taskId=uc0ebbce2-f75b-460f-9e8c-b3c63e09b65&title=)

#### 6.2.3.3 性能分析

1. `停止-等待协议`简单易操作
2. 信道利用率太低

![1619927676294.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011237687-a40ec4e4-c8b5-42f8-9976-903f75192590.png#averageHue=%23f1ebe7&clientId=ud50343c9-f654-4&from=drop&id=ubae43366&originHeight=637&originWidth=1450&originalType=binary&ratio=1&rotation=0&showTitle=false&size=241537&status=done&style=none&taskId=u405b2d37-e8d7-4c68-a75c-cdcfb65359c&title=)

> **信道利用率：**
>  
> ![1619927760134.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011257094-71606322-3ae6-4c4f-91d7-d46337bf352b.png#averageHue=%23f0efef&clientId=ud50343c9-f654-4&from=drop&id=ufe212e1f&originHeight=534&originWidth=1649&originalType=binary&ratio=1&rotation=0&showTitle=false&size=417724&status=done&style=none&taskId=u21a2c03d-c42b-4c98-b1cc-74d2c61a027&title=)


## 6.3 流量控制之后退N帧协议【GBN】

### 6.3.1 滑动窗口

![1619929127046.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011277257-e545c7e3-ef7e-4d0c-aade-c64a91a2878b.png#averageHue=%23f5f5f4&clientId=ud50343c9-f654-4&from=drop&id=uedcff227&originHeight=640&originWidth=1522&originalType=binary&ratio=1&rotation=0&showTitle=false&size=323998&status=done&style=none&taskId=u0a68a10c-541e-4828-a9f4-5772c0b44b2&title=)

### 6.3.2 GBN发送方必须响应的三件事

【上层的调用】

	上层要发送数据时，发送方先检查发送窗口是否已满。如果`未满`，则产生一个帧并将其发送；若果`窗口已满`，发送方只需将数据返回给上层，暗示上层窗口已满，上层等会再发。（实际实现中，发送方法可以缓存这些数据，窗口不满时再发送帧）。

【收到了一个ACK】

	GBN协议中，对n号帧的确认采用`累积确认`的方式，表明接收方已经收到n号帧和它之前的全部帧。

【超时事件】

	协议的名字为后退N帧/回退N帧，来源于`出现丢失帧`和`帧的时延过长`时，发送方的行为。就像在`停止-等待协议`中一样，定时器将再次用于恢复数据帧或确认帧的丢失。如果出现超时发送方将重传所有已发送但未被确认的帧。

![1619930513842.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011308449-eb33ab85-7280-46d9-af9d-b02e394bd8d5.png#averageHue=%23f9f9f9&clientId=ud50343c9-f654-4&from=drop&id=u5c9a20f0&originHeight=420&originWidth=934&originalType=binary&ratio=1&rotation=0&showTitle=false&size=47660&status=done&style=none&taskId=u8994b222-5898-4900-b537-36190029d91&title=)

> 	`接收方按帧编号顺序接收帧，当某一编号帧无法收到时，将一直等待该帧，其后的帧直接丢弃。发送方经过一定时间后，将未接收确认的帧重传。`


### 6.3.3 GBN接收方的任务

1. 如果正确收到n号帧并且按序，接收方将为n帧发送一个ACK，并将该帧中是数据部分交付给上一层
2. 其余情况都丢弃帧，并为最近按序接收的帧重新发送ACK。接收方无需缓存任何失序帧，只需要维护一个信息：`expectedseqnum【下一个按序接收的帧序号】`

> 运行中的GBN：


![1619934236932.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011328430-ec9780eb-3668-4eff-96e2-204737652bd2.png#averageHue=%23f2f1f1&clientId=ud50343c9-f654-4&from=drop&id=u16294b79&originHeight=923&originWidth=1613&originalType=binary&ratio=1&rotation=0&showTitle=false&size=741488&status=done&style=none&taskId=u0c424949-9168-4150-9690-77a9dda7161&title=)

### 6.3.4 滑动窗口长度

![1619934409658.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011341330-713213b8-2462-4a60-ac4d-6202409c7041.png#averageHue=%23edeaea&clientId=ud50343c9-f654-4&from=drop&id=ucc4950bc&originHeight=433&originWidth=1636&originalType=binary&ratio=1&rotation=0&showTitle=false&size=333632&status=done&style=none&taskId=u864f7890-6905-4e5c-b24f-e6085e4c3b1&title=)

> 如：采用2个比特对帧编号，发送窗口大小为4【大于上述给定范围】，若第一次发送4个帧全部丢失，则发送发重传，此时接收端无法确认此时的4个帧是新帧还是旧帧。


【习题】

![1619934642624.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011355554-7ad0367d-15ec-4d11-904c-d120984bb52d.png#averageHue=%23edeaea&clientId=ud50343c9-f654-4&from=drop&id=ufef35bb3&originHeight=423&originWidth=1533&originalType=binary&ratio=1&rotation=0&showTitle=false&size=296316&status=done&style=none&taskId=u17d89f16-776a-4711-8f80-3345d56db5c&title=)

### 6.3.5 GBN性能分析

1. 因连续发送数据帧而提高了信道利用率
2. 在重传时必须把原来已经正确传送的数据帧重传，使得传送效率降低
3. 基于以上描述，引出`选择重传协议`

# 7. 信道划分介质访问控制

## 7.1 传输数据使用的两种链路

`点对点链路`：两个相邻节点通过一个链路相连，没有第三者。【应用：PPP协议，常用于`广域网`】

`广播式链路`：所有主机共享通信介质。【应用：早期的总线以太网、无限局域网、常用于`局域网`】

					【典型拓扑结构：总线型、星型（逻辑总线型）】

## 7.2 介质访问控制

`介质访问控制`的内容就是，采取一定的措施，使得两对节点之间的通信不会发生互相干扰的情况。

![1619940299853.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011436504-7a14824b-033f-46ad-beb5-154edd470604.png#averageHue=%23f2f0ef&clientId=ud50343c9-f654-4&from=drop&id=u3fc779d9&originHeight=716&originWidth=1639&originalType=binary&ratio=1&rotation=0&showTitle=false&size=496220&status=done&style=none&taskId=u71b34d29-7bea-4ebf-b1aa-7f50d808134&title=)

## 7.3 信道划分介质访问控制

	`信道划分介质访问控制`：将使用介质的每个设备与来自同一信道上的其他设备的**通信隔离开**，把`时域和频域资源`合理地分配给网络上的设备。
	
	`多路复用技术`：把多个信号组合在一条物理信道上进行传输，使得多个计算机或终端设备`共享信道资源`，提高信道利用率。

![1619937390124.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011464802-056531be-20af-46ec-9faa-41b90ada498a.png#averageHue=%23ecebea&clientId=ud50343c9-f654-4&from=drop&id=u8555e55a&originHeight=623&originWidth=1671&originalType=binary&ratio=1&rotation=0&showTitle=false&size=373661&status=done&style=none&taskId=u59e1bfd3-82c6-4dd3-8955-56f8e4b7aa6&title=)

## 7.4 静态划分信道

### 7.4.1 频分多路复用【FDM】

![1619937560317.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011491753-73590a02-4030-460e-b57e-38594ee0ee14.png#averageHue=%23ececec&clientId=ud50343c9-f654-4&from=drop&id=ueda9bb25&originHeight=551&originWidth=1674&originalType=binary&ratio=1&rotation=0&showTitle=false&size=376909&status=done&style=none&taskId=u22e7d2fb-1f99-4402-95df-dd98ae57ce5&title=)

### 7.4.2 时分多路复用 【TDM】

![1619937729995.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011532420-afa58396-13fc-4375-80dd-738a24cdd0da.png#averageHue=%23ebeaea&clientId=ud50343c9-f654-4&from=drop&id=u7b3dbee6&originHeight=510&originWidth=1597&originalType=binary&ratio=1&rotation=0&showTitle=false&size=300172&status=done&style=none&taskId=u639f386f-04a7-4fd6-bcdf-24e6e05745d&title=)

### 7.4.3 统计时分复用【STDM】

`改进的时分复用`

![1619937959718.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011552944-1a3ae5a4-d120-44af-981f-4a5b1a870ec8.png#averageHue=%23f2f0ef&clientId=ud50343c9-f654-4&from=drop&id=u3b1409a9&originHeight=605&originWidth=1496&originalType=binary&ratio=1&rotation=0&showTitle=false&size=362545&status=done&style=none&taskId=u67dca068-692f-46bc-8116-122c68e731e&title=)

> 若线路传输速率为`8000bit/s`，则对于TDM来说，每个用户【A、B、C、D】只能得到`2000bit/s`；而对于STDM，每个用户最高可以得到`8000bit/s`。


### 7.4.4 波分多路复用【WDM】

![1619938213101.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011568271-c8e4fd68-44af-4c53-a906-18f837bca2d5.png#averageHue=%23ececec&clientId=ud50343c9-f654-4&from=drop&id=u3d83fde9&originHeight=503&originWidth=1526&originalType=binary&ratio=1&rotation=0&showTitle=false&size=320681&status=done&style=none&taskId=ue96018f1-9a10-4681-82f2-2813ed7e0fb&title=)

## 7.5 动态划分信道

### 7.5.1 ALOHA协议

`【纯ALOHA协议】`

	不监听信道、不按时间槽发送、随机重发。

![1619940569214.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011589069-c353c010-0194-45a1-89d4-7c41e2ef3efd.png#averageHue=%23f1f1f1&clientId=ud50343c9-f654-4&from=drop&id=u6c8a57f0&originHeight=569&originWidth=1672&originalType=binary&ratio=1&rotation=0&showTitle=false&size=303369&status=done&style=none&taskId=uc1f4d6df-e621-4bb2-93b4-07663666331&title=)

`【时隙ALOHA协议】`

	把时间分成若干个相同的时间片，所有用户在时间片开始时刻同步接入网络信道，若发生冲突，则必须等到下一个时间片开始时刻再发送。`控制想发就发的随意性`

![1619940887388.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011603011-6c0c9932-02c7-4058-ac21-59bff58c20fa.png#averageHue=%23f0f0f0&clientId=ud50343c9-f654-4&from=drop&id=u7413ed7d&originHeight=328&originWidth=1180&originalType=binary&ratio=1&rotation=0&showTitle=false&size=87670&status=done&style=none&taskId=u18c17ccf-0331-4189-80dc-914201f35b4&title=)

【区别】

![1619940952174.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011615851-be5ac6e8-58d1-41d3-8866-9359c1e17b8a.png#averageHue=%23e5e5e5&clientId=ud50343c9-f654-4&from=drop&id=uee553768&originHeight=143&originWidth=1185&originalType=binary&ratio=1&rotation=0&showTitle=false&size=89521&status=done&style=none&taskId=uebcf1748-5b1b-48ba-906b-b65b64f57e1&title=)

### 7.5.2 CSMA协议

![1619941105889.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011639405-fcb2c163-b45e-469f-88f9-ea0317f9a856.png#averageHue=%23e6e6e6&clientId=ud50343c9-f654-4&from=drop&id=ue486db84&originHeight=631&originWidth=1585&originalType=binary&ratio=1&rotation=0&showTitle=false&size=496182&status=done&style=none&taskId=u2ef987db-0fd7-4ba8-903f-00fb6cf92b0&title=)

#### 7.5.2.1 1-坚持CSMA

![1619941218137.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011659958-4893d291-d9dc-473f-ada0-d1b82f818806.png#averageHue=%23eae9e9&clientId=ud50343c9-f654-4&from=drop&id=u68e609b7&originHeight=374&originWidth=1575&originalType=binary&ratio=1&rotation=0&showTitle=false&size=321320&status=done&style=none&taskId=ucdf4c6f4-e2c8-4000-b036-2ce85d5e0b4&title=)

#### 7.5.2.2 非坚持CSMA

![1619941303637.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011710693-1df53fda-7552-449b-a230-0e62f4e38e03.png#averageHue=%23eae8e8&clientId=ud50343c9-f654-4&from=drop&id=u87b31905&originHeight=325&originWidth=1551&originalType=binary&ratio=1&rotation=0&showTitle=false&size=300911&status=done&style=none&taskId=u9e71b33c-532e-468a-8c15-53322270848&title=)

#### 7.5.2.3 p-坚持CSMA

![1619941430182.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011721317-b8bcb00f-a9dc-4017-9d10-c45e8e219ae1.png#averageHue=%23eeeceb&clientId=ud50343c9-f654-4&from=drop&id=uc1efe2e0&originHeight=467&originWidth=1559&originalType=binary&ratio=1&rotation=0&showTitle=false&size=380629&status=done&style=none&taskId=u611f2a05-46d6-48f3-a6da-93607f85d88&title=)

#### 7.5.2.4 对比

![1619941468291.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011733084-0fafffc0-de05-49de-b9ff-5adcda01d187.png#averageHue=%23cdcdcc&clientId=ud50343c9-f654-4&from=drop&id=u6a30d1af&originHeight=425&originWidth=1539&originalType=binary&ratio=1&rotation=0&showTitle=false&size=148206&status=done&style=none&taskId=ub3ff2cef-7549-4560-868b-fd400e0e9a5&title=)

### 7.5.3 CSMA/CA协议

#### 7.5.3.1 介绍

![1619942488399.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011771659-5ee2452d-d648-4e90-8a31-7771fa7aec4e.png#averageHue=%23efefef&clientId=ud50343c9-f654-4&from=drop&id=uc770c155&originHeight=354&originWidth=1657&originalType=binary&ratio=1&rotation=0&showTitle=false&size=270387&status=done&style=none&taskId=u81e7aae7-5c79-4d87-98bf-e6dd2f7288f&title=)

#### 7.5.3.2 工作原理

![1619942820721.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011786532-34d05ae1-6307-4dbe-a969-3e66460c8702.png#averageHue=%23eae7e7&clientId=ud50343c9-f654-4&from=drop&id=u6fb6904f&originHeight=474&originWidth=1671&originalType=binary&ratio=1&rotation=0&showTitle=false&size=471214&status=done&style=none&taskId=u8b82fb05-12f1-437b-9a56-c59ae69bb5c&title=)

#### 7.5.3.3 CSMA/CD与CSMA/CA对比

![1619943003059.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011809565-b9d52396-e313-4189-808d-699b8c0d7e42.png#averageHue=%23e2e1e1&clientId=ud50343c9-f654-4&from=drop&id=u267429a4&originHeight=413&originWidth=1606&originalType=binary&ratio=1&rotation=0&showTitle=false&size=480443&status=done&style=none&taskId=u47b13e98-7d03-4f1f-8019-8391da9e628&title=)

### 7.5.4 CSMA/CD协议

#### 7.5.4.1 介绍

![1620010017325.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011841825-6f3001ce-450c-4926-848e-917a4a4ad68a.png#averageHue=%23efebe4&clientId=ud50343c9-f654-4&from=drop&id=u47213487&originHeight=411&originWidth=1068&originalType=binary&ratio=1&rotation=0&showTitle=false&size=262912&status=done&style=none&taskId=u324e6809-9994-4fd5-b18e-b427deea7bf&title=)

#### 7.5.4.2 传播时延对载波监听的影响

![1620010482279.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011854560-9cce94b9-88a0-4f4f-9a3d-e3bca5a30281.png#averageHue=%23f0edeb&clientId=ud50343c9-f654-4&from=drop&id=uda15f745&originHeight=732&originWidth=1646&originalType=binary&ratio=1&rotation=0&showTitle=false&size=578338&status=done&style=none&taskId=u314d4cf3-a46c-41ee-944a-530a005d8b7&title=)

#### 7.5.4.3 碰撞后的重传时机

![1620010739677.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011868678-665b18a0-a596-414c-8faa-83eba0e59f6b.png#averageHue=%23e8e8e8&clientId=ud50343c9-f654-4&from=drop&id=u747a710c&originHeight=629&originWidth=1526&originalType=binary&ratio=1&rotation=0&showTitle=false&size=684760&status=done&style=none&taskId=uc6b47671-d362-494b-a7e1-78488f8a421&title=)

【例题】

![1620010793488.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011878712-e7556e8e-c970-45f3-914b-6babb4941a65.png#averageHue=%23f8f7f7&clientId=ud50343c9-f654-4&from=drop&id=u2a299905&originHeight=382&originWidth=1481&originalType=binary&ratio=1&rotation=0&showTitle=false&size=154202&status=done&style=none&taskId=u974af56b-ace1-4efb-950e-74c9018b160&title=)

#### 7.5.4.4 最小帧长问题

![1620010879739.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011886435-90ffb55c-e7d2-41df-bfd7-b5dd7d3b3bdd.png#averageHue=%23f1f1f1&clientId=ud50343c9-f654-4&from=drop&id=ud8db477e&originHeight=237&originWidth=1620&originalType=binary&ratio=1&rotation=0&showTitle=false&size=84108&status=done&style=none&taskId=u9fba095e-85e9-47dc-a2cf-62f8c065a67&title=)

`为了使CSMA/CD协议能发挥作用，即在帧发送完毕之前就可以检测到碰撞，需要定义一个最小帧长`

【最小帧长】

![1620011063230.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011899001-ebf9ad7f-2811-4875-9667-011cb093a4b5.png#averageHue=%23f4f3f3&clientId=ud50343c9-f654-4&from=drop&id=u18eef73c&originHeight=365&originWidth=1656&originalType=binary&ratio=1&rotation=0&showTitle=false&size=265320&status=done&style=none&taskId=u2ab86541-6a29-4166-afc9-3fc22db18de&title=)

# 8. 轮询访问介质访问控制

## 8.1 对比

![1619941859962.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011956222-3d237eee-2a4c-45a9-8948-a72b3a8a67db.png#averageHue=%23eeeded&clientId=ud50343c9-f654-4&from=drop&id=ua87c5199&originHeight=738&originWidth=1558&originalType=binary&ratio=1&rotation=0&showTitle=false&size=534156&status=done&style=none&taskId=u0e423e1e-9bc2-4701-9f09-ba9941a85b2&title=)

## 8.2 轮询协议

![](resource/1619942014645.png#id=aB3MV&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)![1619942014645.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011968939-1485f9e4-71d6-4d5d-b1eb-f5710b23b48b.png#averageHue=%23f7f7f7&clientId=ud50343c9-f654-4&from=drop&id=u9e8373a5&originHeight=593&originWidth=1661&originalType=binary&ratio=1&rotation=0&showTitle=false&size=225577&status=done&style=none&taskId=u116442ad-b475-4a37-867c-67d68b5c400&title=)

## 8.3 令牌传递协议

![1619942227252.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674011977400-26c2ab65-e4e9-453e-bad3-af69b798a7d5.png#averageHue=%23eeeeee&clientId=ud50343c9-f654-4&from=drop&id=u839779e2&originHeight=573&originWidth=1589&originalType=binary&ratio=1&rotation=0&showTitle=false&size=379262&status=done&style=none&taskId=u2db7a7dc-014e-4fe3-80b2-c4a17bc8848&title=)

# 9. 局域网基本概念和体系结构

## 9.1 局域网

![1619943263844.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012061513-bc686801-4678-4836-b37e-529f55f76ab0.png#averageHue=%23e7e6e6&clientId=ud50343c9-f654-4&from=drop&id=u27f85bc7&originHeight=374&originWidth=1667&originalType=binary&ratio=1&rotation=0&showTitle=false&size=407806&status=done&style=none&taskId=uf67ce07e-3427-4cc2-98ab-e47047b6a91&title=)

### 9.1.1 局域网拓扑结构

![1619943436629.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012094105-f88d241e-1c66-4bc1-86f3-fbae228aeab0.png#averageHue=%23ededed&clientId=ud50343c9-f654-4&from=drop&id=ub9ae4ee9&originHeight=716&originWidth=1687&originalType=binary&ratio=1&rotation=0&showTitle=false&size=618109&status=done&style=none&taskId=u81cd79c1-0a80-48bd-af6c-31365e82c2b&title=)

### 9.1.2 局域网传输介质

![1619943492374.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012118472-907fa8c1-57b3-40a0-bde8-5f061177e898.png#averageHue=%23f2f2f2&clientId=ud50343c9-f654-4&from=drop&id=u0617443e&originHeight=302&originWidth=1386&originalType=binary&ratio=1&rotation=0&showTitle=false&size=112555&status=done&style=none&taskId=u830d1894-aeb9-47bc-b152-42fc242365e&title=)

### 9.1.3 局域网介质访问控制方法

![1619943607631.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012155899-276ef637-8a65-4dd9-8726-4333da98b39e.png#averageHue=%23ebebeb&clientId=ud50343c9-f654-4&from=drop&id=ub7644ba0&originHeight=331&originWidth=1499&originalType=binary&ratio=1&rotation=0&showTitle=false&size=246988&status=done&style=none&taskId=ufe59df9b-bc86-4264-ac1f-3d9e70a6ca6&title=)

### 9.1.4 无限局域网划分

![1619943735703.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012204852-ae37b1c8-75e4-4696-8e2b-4cb9294cdf3f.png#averageHue=%23e9e5e1&clientId=ud50343c9-f654-4&from=drop&id=ub6e4732a&originHeight=459&originWidth=1517&originalType=binary&ratio=1&rotation=0&showTitle=false&size=523837&status=done&style=none&taskId=u92d65f14-20e8-4b77-8f30-21205007612&title=)

### 9.1.5 IEEE 802标准

[IEEE 802现有标准](https://baike.baidu.com/item/IEEE%20802/6808672?fr=aladdin#3_2)

![1619943899450.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012223029-1ad6138f-b143-4c4d-849e-4d441e9080bc.png#averageHue=%23e7e3e0&clientId=ud50343c9-f654-4&from=drop&id=u028bff59&originHeight=263&originWidth=1493&originalType=binary&ratio=1&rotation=0&showTitle=false&size=230484&status=done&style=none&taskId=u47c5c789-56e3-42ef-a6aa-f925fe1f76a&title=)

### 9.1.6 MAC子层与LLC子层

![1619944147130.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012238604-afc82338-b23c-4c6d-b225-1f278d7b9458.png#averageHue=%23ecebeb&clientId=ud50343c9-f654-4&from=drop&id=ue2468142&originHeight=604&originWidth=1642&originalType=binary&ratio=1&rotation=0&showTitle=false&size=503885&status=done&style=none&taskId=uacc5b72d-fb13-40e7-a87c-88e600caee8&title=)

## 9.2 以太网

### 9.2.1 以太网概述

![1619959081267.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012258724-6bd65992-5bfb-4e36-9de0-0b5109407ce3.png#averageHue=%23ececeb&clientId=ud50343c9-f654-4&from=drop&id=u0bea6f48&originHeight=661&originWidth=1573&originalType=binary&ratio=1&rotation=0&showTitle=false&size=516347&status=done&style=none&taskId=ua8dd171b-1278-4ca7-98b0-e10d24bcb75&title=)

> `以太网提供无连接、不可靠的服务`
>  
> ![1619959187249.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012304005-2b969a9f-dc22-46bb-855b-b039db9bdb32.png#averageHue=%23eae8e8&clientId=ud50343c9-f654-4&from=drop&id=ud4e2ab8e&originHeight=210&originWidth=1544&originalType=binary&ratio=1&rotation=0&showTitle=false&size=179720&status=done&style=none&taskId=u88a79ec4-3885-40c7-8b59-fbea08a2d20&title=)


### 9.2.2 以太网传输介质与拓扑结构的发展

![1619959309416.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012315522-0f8ee6ee-3505-407d-b571-caf98459e83d.png#averageHue=%23ece4e0&clientId=ud50343c9-f654-4&from=drop&id=u40b63695&originHeight=618&originWidth=1534&originalType=binary&ratio=1&rotation=0&showTitle=false&size=320232&status=done&style=none&taskId=u40372348-96f1-46fc-8996-ef066e4685b&title=)

### 9.2.3 10 BASE-T以太网

![1619959436846.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012347521-9d074de3-eb77-40e8-b2d1-ea4cc7de79cc.png#averageHue=%23eeeceb&clientId=ud50343c9-f654-4&from=drop&id=uc0cc305b&originHeight=342&originWidth=1542&originalType=binary&ratio=1&rotation=0&showTitle=false&size=294030&status=done&style=none&taskId=u507997e9-32d0-4b90-8241-4d64da184d1&title=)

### 9.2.4 适配器与MAC地址

![1619960565378.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012364232-192720ba-93f3-445e-bfe2-5b82b7d3ee4d.png#averageHue=%23ebebeb&clientId=ud50343c9-f654-4&from=drop&id=u0c9135c9&originHeight=655&originWidth=1618&originalType=binary&ratio=1&rotation=0&showTitle=false&size=541616&status=done&style=none&taskId=u88cf4165-dc43-441e-bf82-03233297e5e&title=)

### 9.2.5 以太网MAC帧

![1619960820896.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012391042-cd05f7df-2b18-4011-ae67-d3ced04647e1.png#averageHue=%23f1f1f0&clientId=ud50343c9-f654-4&from=drop&id=uc28ecd88&originHeight=617&originWidth=1661&originalType=binary&ratio=1&rotation=0&showTitle=false&size=367373&status=done&style=none&taskId=u87aa763b-a22b-47df-afb9-431a08c7e7f&title=)

### 9.2.6 高速以太网

![1619961024138.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012405337-8f0883d2-c4b3-441e-ba90-1e71bac002ab.png#averageHue=%23f2f1f0&clientId=ud50343c9-f654-4&from=drop&id=uebabb00e&originHeight=647&originWidth=1485&originalType=binary&ratio=1&rotation=0&showTitle=false&size=433736&status=done&style=none&taskId=u8f2a7a5c-23a2-4f9d-b186-0309bd715c0&title=)

## 9.3 IEEE 802.11 无限局域网

### 9.3.1 IEEE 802.11

![1620007437899.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012422037-4936caf4-e82f-4acb-bee9-33c1a10d99de.png#averageHue=%23f6f6f6&clientId=ud50343c9-f654-4&from=drop&id=uad5f0b82&originHeight=569&originWidth=1541&originalType=binary&ratio=1&rotation=0&showTitle=false&size=470989&status=done&style=none&taskId=uf3d02b32-11cd-4e38-aa0d-3cfc06afb24&title=)

### 9.3.2 802.11的MAC帧头格式

![1620008118588.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012434487-3ae8d1ef-f7b1-4a78-83de-c9133caa963c.png#averageHue=%23ebe7e7&clientId=ud50343c9-f654-4&from=drop&id=u002f63d9&originHeight=406&originWidth=1557&originalType=binary&ratio=1&rotation=0&showTitle=false&size=354482&status=done&style=none&taskId=ud25a1c9f-7cf9-458f-8155-9e6b25a926b&title=)

【四种格式比对】

![1620008196895.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012454741-b9af87fb-631c-4d01-b540-caf8637cafaf.png#averageHue=%23f9f9f8&clientId=ud50343c9-f654-4&from=drop&id=u49aff6f2&originHeight=488&originWidth=1669&originalType=binary&ratio=1&rotation=0&showTitle=false&size=245603&status=done&style=none&taskId=ucb837811-8f04-4601-8dc5-201edf09d9c&title=)

### 9.3.3 无线局域网分类

#### 9.3.3.1 有固定基础设施的无线局域网

![1620009505234.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012465048-b6ae3072-e72a-4bad-997b-4174c6b9bcb0.png#averageHue=%23d4d2d2&clientId=ud50343c9-f654-4&from=drop&id=udbbeba21&originHeight=610&originWidth=1478&originalType=binary&ratio=1&rotation=0&showTitle=false&size=592332&status=done&style=none&taskId=uc296a506-6dfd-4289-bdbb-d959ca40da0&title=)

#### 9.3.3.2 无固定基础设施无线局域网的自组织网络

![1620009688627.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012486021-0a239497-ebd7-4376-968a-52c0095f25d2.png#averageHue=%23e8e8e8&clientId=ud50343c9-f654-4&from=drop&id=uf669491d&originHeight=604&originWidth=1651&originalType=binary&ratio=1&rotation=0&showTitle=false&size=265331&status=done&style=none&taskId=ue4f910b3-8d42-4c4f-aa3d-aa50e5a70df&title=)

# 10. PPP协议与HDLC协议

## 10.1 广域网

`广域网强调资源共享，局域网强调数据传输!`

![1620011296521.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012533833-d52a75cc-f891-4835-8ba0-7269a4d5a827.png#averageHue=%23e5e4e4&clientId=ud50343c9-f654-4&from=drop&id=u73915d9a&originHeight=709&originWidth=1523&originalType=binary&ratio=1&rotation=0&showTitle=false&size=509760&status=done&style=none&taskId=ud1872516-30af-4245-acbf-1415c025eae&title=)

## 10.2 PPP协议

### 10.2.1 特点

![1620012497320.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012544996-e4143526-78c4-47e5-9a87-0ad2b54a6f71.png#averageHue=%23e8e3e3&clientId=ud50343c9-f654-4&from=drop&id=u31a0e311&originHeight=172&originWidth=1551&originalType=binary&ratio=1&rotation=0&showTitle=false&size=153917&status=done&style=none&taskId=u7911002c-3069-45e5-99f5-178c729bb75&title=)

### 10.2.2 需满足的要求

![1620012586010.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012580834-433aaf75-b151-4573-b6a3-5c8fa1fbed39.png#averageHue=%23eaeaea&clientId=ud50343c9-f654-4&from=drop&id=u6dbed319&originHeight=391&originWidth=1223&originalType=binary&ratio=1&rotation=0&showTitle=false&size=263166&status=done&style=none&taskId=u2c4e698e-0b3f-4c68-8502-1aca002c364&title=)

### 10.2.3 无需满足的要求

- 无需纠错
- 无需流量控制
- 无需序号
- 不支持多点线路

### 10.2.4 三个组成部分

![1620012749488.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012596359-5474d23c-48f0-47ba-8532-9486c109f23a.png#averageHue=%23e8e7e7&clientId=ud50343c9-f654-4&from=drop&id=ueb157dc7&originHeight=260&originWidth=1469&originalType=binary&ratio=1&rotation=0&showTitle=false&size=213059&status=done&style=none&taskId=u1332689f-bbe4-450e-a8c7-848a120870c&title=)

### 10.2.5 状态图

![1620012785545.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012630684-9a197282-95f3-4eac-b42e-b9571de01453.png#averageHue=%23f0f0f0&clientId=ud50343c9-f654-4&from=drop&id=uc5c1c175&originHeight=609&originWidth=1675&originalType=binary&ratio=1&rotation=0&showTitle=false&size=275563&status=done&style=none&taskId=ub4137bdc-b457-4190-ab0e-1d20eda342c&title=)

### 10.2.6 帧格式

![1620013309936.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012654728-84ffa258-bb24-4b9a-a564-7024ebd8bffd.png#averageHue=%23f2f1f0&clientId=ud50343c9-f654-4&from=drop&id=u66171e99&originHeight=576&originWidth=1636&originalType=binary&ratio=1&rotation=0&showTitle=false&size=302755&status=done&style=none&taskId=ufa7bdf42-769a-489d-b03d-c3f43c26850&title=)

## 10.3 HDLC协议

### 10.3.1 简介

![1620013506100.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012675560-9d90c548-ad55-4ed1-92e5-fd7677e76f75.png#averageHue=%23dedddd&clientId=ud50343c9-f654-4&from=drop&id=u5127c8ca&originHeight=235&originWidth=1571&originalType=binary&ratio=1&rotation=0&showTitle=false&size=276313&status=done&style=none&taskId=ufdc758b2-5eb9-449d-b659-e9112823ad1&title=)

### 10.3.2 HDLC的站

![1620013566668.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012687715-a42adb51-1dec-45fe-a392-1ef988a05780.png#averageHue=%23ebebeb&clientId=ud50343c9-f654-4&from=drop&id=uece1d3ad&originHeight=451&originWidth=1450&originalType=binary&ratio=1&rotation=0&showTitle=false&size=373096&status=done&style=none&taskId=uafc8a3ab-3e2b-47b4-9bbb-b78c3e122e9&title=)

### 10.3.3 帧格式

![1620013640534.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012698249-27f45845-9e18-44e2-b88b-9a116ba4ae42.png#averageHue=%23ededed&clientId=ud50343c9-f654-4&from=drop&id=u080e23e3&originHeight=505&originWidth=1513&originalType=binary&ratio=1&rotation=0&showTitle=false&size=371266&status=done&style=none&taskId=u29631aeb-782e-409b-8e42-502ff3093bf&title=)

## 10.4 PPP协议与HDLC协议对比

![1620013760861.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012726577-09b8480c-b1eb-419c-8f16-d3ea21e11f6d.png#averageHue=%23f3f3f3&clientId=ud50343c9-f654-4&from=drop&id=udf8b5d7e&originHeight=720&originWidth=1581&originalType=binary&ratio=1&rotation=0&showTitle=false&size=362786&status=done&style=none&taskId=u50e5fa63-2e80-42d0-9a1a-586a68817f8&title=)

# 11. 链路层设备

## 11.1 物理层扩展以太网

`主机与集线器之间的距离超过100m后，失帧会变得非常严重`：

![1620015216932.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012741381-4a80bacc-267d-4d40-a554-bfeff4191327.png#averageHue=%23f4f4f4&clientId=ud50343c9-f654-4&from=drop&id=ua7435f3d&originHeight=272&originWidth=1375&originalType=binary&ratio=1&rotation=0&showTitle=false&size=73553&status=done&style=none&taskId=u8bedb40f-64b1-4470-b83f-6293c24a3b9&title=)

`为了实现远距离通信，需要扩展以太网`：

1. 把物理连接线路改为光纤

![1620015337074.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012756814-cb870509-ad0c-4510-8d34-066976651e06.png#averageHue=%23f4ead3&clientId=ud50343c9-f654-4&from=drop&id=u2178bea7&originHeight=162&originWidth=1578&originalType=binary&ratio=1&rotation=0&showTitle=false&size=75857&status=done&style=none&taskId=u90b81223-e804-4003-9558-c36cef2ad4e&title=)

2. 使用主干集线器

![1620015417568.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012760657-1edd1920-f196-4f38-ab0b-bff70904b87c.png#averageHue=%23f7e9df&clientId=ud50343c9-f654-4&from=drop&id=uf690a351&originHeight=332&originWidth=1516&originalType=binary&ratio=1&rotation=0&showTitle=false&size=224709&status=done&style=none&taskId=u76af3d6e-210f-4adc-8605-66d9fc80fb3&title=)

	可以形成更大的冲突域

![1620015462454.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012769389-655544d5-1878-4a62-8dce-9e861235561f.png#averageHue=%23f5dfcf&clientId=ud50343c9-f654-4&from=drop&id=uc621291e&originHeight=435&originWidth=1663&originalType=binary&ratio=1&rotation=0&showTitle=false&size=204072&status=done&style=none&taskId=u08f898e8-4f95-41de-a910-9fc40d053f4&title=)

> 缺点：
>  
> 1. 发送冲突概率变高
> 2. 链路通信效率降低


## 11.2 链路层扩展以太网

### 11.2.1 网桥

#### 11.2.1.1 简介

![1620030615662.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012811015-d089a4a4-c7ab-4dab-a47e-c05337bb0c58.png#averageHue=%23ebe4df&clientId=ud50343c9-f654-4&from=drop&id=u79018860&originHeight=622&originWidth=1552&originalType=binary&ratio=1&rotation=0&showTitle=false&size=442459&status=done&style=none&taskId=ufbc30338-248f-4c66-bdf6-bddbbbcd34f&title=)

#### 11.2.1.2 透明网桥

![1620030828715.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012824352-4524cb84-cbc6-47d5-bf04-d6cf9d992d5b.png#averageHue=%23edebeb&clientId=ud50343c9-f654-4&from=drop&id=ubc9da98e&originHeight=631&originWidth=1459&originalType=binary&ratio=1&rotation=0&showTitle=false&size=371886&status=done&style=none&taskId=u99db6928-27f3-4857-b7b8-a2eecbb9c5c&title=)

#### 11.2.1.3 源路由网桥

![1620030880725.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012836853-803e84ca-e54e-4cff-bd51-466b98b3188a.png#averageHue=%23f3f2f1&clientId=ud50343c9-f654-4&from=drop&id=uaa5f22b1&originHeight=580&originWidth=1488&originalType=binary&ratio=1&rotation=0&showTitle=false&size=318780&status=done&style=none&taskId=u880a12e7-695e-4eca-84f7-dd88521ba9b&title=)

### 11.2.2 以太网交换机【多接口网桥】

![1620030988533.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012847285-e5364ef5-38f8-43a3-9b49-531a133e2eef.png#averageHue=%23f4eae4&clientId=ud50343c9-f654-4&from=drop&id=u4cff2fe4&originHeight=541&originWidth=1467&originalType=binary&ratio=1&rotation=0&showTitle=false&size=342151&status=done&style=none&taskId=u66954c94-dd85-416b-9adb-8e932236248&title=)

> 以太网交换机的两种交换方式：
>  
> ![1620031081344.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012861069-ceb22cec-8eff-4c99-92d3-78d1f3d64e18.png#averageHue=%23f0f0f0&clientId=ud50343c9-f654-4&from=drop&id=u4d6b794a&originHeight=367&originWidth=1339&originalType=binary&ratio=1&rotation=0&showTitle=false&size=267356&status=done&style=none&taskId=u30ddc221-da89-407f-8f79-7c4310f2998&title=)


## 11.3 冲突域和广播域

![1620031200957.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012870971-86e0d9c3-c5fe-404b-a795-b921f0a1c541.png#averageHue=%23eaf5f8&clientId=ud50343c9-f654-4&from=drop&id=u71709a0a&originHeight=550&originWidth=1533&originalType=binary&ratio=1&rotation=0&showTitle=false&size=376301&status=done&style=none&taskId=uc4bd5543-774e-4e13-ab3e-56bb81f64d5&title=)

【例题】

![1620031265341.png](https://cdn.nlark.com/yuque/0/2023/png/499762/1674012879867-143cb383-6350-4eec-9d7e-55a5d8ca591b.png#averageHue=%23faf9f8&clientId=ud50343c9-f654-4&from=drop&id=ubeeb5dbb&originHeight=472&originWidth=1483&originalType=binary&ratio=1&rotation=0&showTitle=false&size=302730&status=done&style=none&taskId=uaa83363b-bf0d-4d49-8a13-5863227c40e&title=)
